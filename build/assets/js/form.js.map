{"version":3,"file":"form.js","sources":["form.js"],"sourcesContent":["(function ($) {\r\n    $(\"form\").on('submit', function () {\r\n\r\n        let form = $(this),\r\n            emailApprove = 0;\r\n\r\n        // Удаляем предыдущие ошибки\r\n        form.find('.error').remove();\r\n        form.find('.required').removeClass('required');\r\n\r\n        let actionValue = form.find('input[name=\"action\"]').val();\r\n\r\n        // Проверка полей\r\n        form.find('input[data-required], textarea[data-required], select[data-required]').each(function () {\r\n            let errorText = $(this).attr('data-error') || 'This field is required';\r\n\r\n            if ($(this).is(':checkbox')) {\r\n                // Проверка чек-боксов\r\n                if (!$(this).is(':checked')) {\r\n                    $(this).closest('.inp-wrp').append(`<div class=\"error\">${errorText}</div>`);\r\n                    $(this).addClass('required');\r\n                }\r\n            } else {\r\n                // Проверка текстовых полей и textarea\r\n                if (!$(this).val().trim()) {\r\n                    $(this).closest('.inp-wrp').append(`<div class=\"error\">${errorText}</div>`);\r\n                    $(this).addClass('required');\r\n                }\r\n            }\r\n\r\n        });\r\n\r\n        // Проверка email (если присутствует)\r\n        form.find('input.inp-email').each(function () {\r\n            let emailInput = $(this),\r\n                pattern = /^([a-z0-9_\\.-])+@[a-z0-9-]+\\.([a-z]{2,4}\\.)?[a-z]{2,4}$/i;\r\n            if (emailInput.val().trim() && !pattern.test(emailInput.val())) {\r\n                emailInput.closest('.inp-wrp').append(`<div class=\"error\">Invalid email address</div>`);\r\n                emailInput.addClass('required');\r\n                emailApprove = 0;\r\n            } else {\r\n                emailApprove = 1;\r\n            }\r\n        });\r\n\r\n        // Если есть ошибки, отменяем отправку\r\n        if (form.find('.required').length || emailApprove === 0) {\r\n\r\n            // Не скролить, если popup form окна\r\n            if (\r\n                actionValue !== 'call' &&                     // Popup call\r\n                actionValue !== 'consult' &&                  // Popup consultation\r\n                actionValue !== 'work_offer' &&               // Popup work-offer\r\n                actionValue !== 'order_products_one_click'    // Замовлення в один клік\r\n            ) {\r\n                const $firstError = form.find('.required').first();\r\n                if ($firstError.length) {\r\n                    $('html, body').animate({\r\n                        scrollTop: $firstError.offset().top - 96 // 48px header + 24px отступ до поля\r\n                    }, 600);\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        // Ваш AJAX-запрос\r\n        $.ajax({\r\n            type: \"POST\",\r\n            url: \"/mailer/mail.php\",\r\n            data: form.serialize(),\r\n            cache: false,\r\n            success: function () {\r\n                $('#thanks-popup').show();\r\n                form[0].reset(); // Сбрасываем форму\r\n            },\r\n            error: function () {\r\n                alert('Error occurred while submitting the form.');\r\n            }\r\n        });\r\n\r\n        return false; // Предотвращаем стандартную отправку формы\r\n    });\r\n\r\n    // Удаление ошибок при фокусе/изменении\r\n    $('input, textarea, select').on('click focus change', function () {\r\n        $(this).removeClass('required');\r\n        $(this).closest('.inp-wrp').find('.error').remove();\r\n    });\r\n\r\n    // Удаление ошибки для чекбокса при изменении\r\n    $('input[type=\"checkbox\"][data-required]').on('change', function () {\r\n        if ($(this).is(':checked')) {\r\n            $(this).removeClass('required');\r\n            $(this).closest('label').find('.error').remove();\r\n        }\r\n    });\r\n\r\n    // Не передзвонювати мені для підтвердження замовлення\r\n    $('#dont-call-back').on('change', function () {\r\n        const $dontCallBackBlock = $(this).closest('.order-form').find('.order-form__dont-call-back');\r\n        if ($(this).is(':checked')) {\r\n            $dontCallBackBlock.stop(true, true).slideDown(300);\r\n        } else {\r\n            $dontCallBackBlock.stop(true, true).slideUp(900);\r\n        }\r\n    });\r\n\r\n})(jQuery);"],"names":["$","on","let","form","this","emailApprove","find","remove","removeClass","actionValue","val","each","errorText","attr","is","closest","append","addClass","trim","emailInput","test","length","$firstError","first","animate","scrollTop","offset","top","ajax","type","url","data","serialize","cache","success","show","reset","error","alert","$dontCallBackBlock","stop","slideDown","slideUp","jQuery"],"mappings":"CAAWA,IACPA,EAAE,MAAM,EAAEC,GAAG,SAAU,WAEnBC,IAAIC,EAAOH,EAAEI,IAAI,EACbC,EAAe,EAGnBF,EAAKG,KAAK,QAAQ,EAAEC,OAAO,EAC3BJ,EAAKG,KAAK,WAAW,EAAEE,YAAY,UAAU,EAE7CN,IAAIO,EAAcN,EAAKG,KAAK,sBAAsB,EAAEI,IAAI,EAsExD,OAnEAP,EAAKG,KAAK,sEAAsE,EAAEK,KAAK,WACnFT,IAAIU,EAAYZ,EAAEI,IAAI,EAAES,KAAK,YAAY,GAAK,yBAE1Cb,EAAEI,IAAI,EAAEU,GAAG,WAAW,EAEjBd,EAAEI,IAAI,EAAEU,GAAG,UAAU,IACtBd,EAAEI,IAAI,EAAEW,QAAQ,UAAU,EAAEC,6BAA6BJ,SAAiB,EAC1EZ,EAAEI,IAAI,EAAEa,SAAS,UAAU,GAI1BjB,EAAEI,IAAI,EAAEM,IAAI,EAAEQ,KAAK,IACpBlB,EAAEI,IAAI,EAAEW,QAAQ,UAAU,EAAEC,6BAA6BJ,SAAiB,EAC1EZ,EAAEI,IAAI,EAAEa,SAAS,UAAU,EAIvC,CAAC,EAGDd,EAAKG,KAAK,iBAAiB,EAAEK,KAAK,WAC9BT,IAAIiB,EAAanB,EAAEI,IAAI,EAKnBC,EAHAc,EAAWT,IAAI,EAAEQ,KAAK,GAAK,CADjB,2DAC0BE,KAAKD,EAAWT,IAAI,CAAC,GACzDS,EAAWJ,QAAQ,UAAU,EAAEC,OAAO,gDAAgD,EACtFG,EAAWF,SAAS,UAAU,EACf,GAEA,CAEvB,CAAC,EAGGd,EAAKG,KAAK,WAAW,EAAEe,QAA2B,IAAjBhB,EAIb,SAAhBI,GACgB,YAAhBA,GACgB,eAAhBA,GACgB,6BAAhBA,IAEMa,EAAcnB,EAAKG,KAAK,WAAW,EAAEiB,MAAM,GACjCF,QACZrB,EAAE,YAAY,EAAEwB,QAAQ,CACpBC,UAAWH,EAAYI,OAAO,EAAEC,IAAM,EAC1C,EAAG,GAAG,EAOlB3B,EAAE4B,KAAK,CACHC,KAAM,OACNC,IAAK,mBACLC,KAAM5B,EAAK6B,UAAU,EACrBC,MAAO,CAAA,EACPC,QAAS,WACLlC,EAAE,eAAe,EAAEmC,KAAK,EACxBhC,EAAK,GAAGiC,MAAM,CAClB,EACAC,MAAO,WACHC,MAAM,2CAA2C,CACrD,CACJ,CAAC,EAEM,CAAA,CACX,CAAC,EAGDtC,EAAE,yBAAyB,EAAEC,GAAG,qBAAsB,WAClDD,EAAEI,IAAI,EAAEI,YAAY,UAAU,EAC9BR,EAAEI,IAAI,EAAEW,QAAQ,UAAU,EAAET,KAAK,QAAQ,EAAEC,OAAO,CACtD,CAAC,EAGDP,EAAE,uCAAuC,EAAEC,GAAG,SAAU,WAChDD,EAAEI,IAAI,EAAEU,GAAG,UAAU,IACrBd,EAAEI,IAAI,EAAEI,YAAY,UAAU,EAC9BR,EAAEI,IAAI,EAAEW,QAAQ,OAAO,EAAET,KAAK,QAAQ,EAAEC,OAAO,EAEvD,CAAC,EAGDP,EAAE,iBAAiB,EAAEC,GAAG,SAAU,WAC9B,IAAMsC,EAAqBvC,EAAEI,IAAI,EAAEW,QAAQ,aAAa,EAAET,KAAK,6BAA6B,EACxFN,EAAEI,IAAI,EAAEU,GAAG,UAAU,EACrByB,EAAmBC,KAAK,CAAA,EAAM,CAAA,CAAI,EAAEC,UAAU,GAAG,EAEjDF,EAAmBC,KAAK,CAAA,EAAM,CAAA,CAAI,EAAEE,QAAQ,GAAG,CAEvD,CAAC,CAEJ,GAAEC,MAAM"}