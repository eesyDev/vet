(v=>{window.App=window.App||{},App.isScrollTopBody=!0,App.winLocHash=window.location.hash,App.$body=v("body"),App.$htmlBody=v("html, body"),App.$modelsMenu=v(".slider-menu .models-menu"),App.scrollTopBody=function(t,e=54,i=600){(t="string"==typeof t?v(t):t).length&&App.$htmlBody.animate({scrollTop:t.offset().top-e},i)},App.initFileUpload=function(t,e,a,s=20){v(t).on("click",function(){v(e).trigger("click")}),v(e).on("change",function(){let t=this.files[0]?.name||"Файл не обрано";var e,i,o;t.length>s&&(e=-1!==(e=t.lastIndexOf("."))?t.slice(e):"",0<(o=s-e.length-3))&&(i=t.slice(0,Math.ceil(o/2)),o=t.slice(-Math.floor(o/2)),t=i+"..."+o+e),v(a).text(t)})},App.lazyLoadImages=function(){v("img[data-src]").each(function(){var t,e,i=v(this);i.isInViewportImg()&&!i.data("loaded")&&(t=i.attr("data-src"),e=i.attr("data-srcset"),t&&i.attr("src",t),e&&i.attr("srcset",e),i.data("loaded",!0),i.hide().fadeIn(400))})},v.fn.isInViewportImg=function(){var t=v(this).offset().top,e=t+v(this).outerHeight(),i=v(window).scrollTop(),o=i+v(window).height();return i<e&&t<o},v(window).on("load scroll resize",App.lazyLoadImages),v.fn.percentOfViewport=function(){var t=v(window).height(),e=v(this).offset().top,i=e+v(this).height(),o=v(window).scrollTop(),a=o+t;return{ELtop_to_VPtop:(e-o)/t*100,ELbottom_to_VPtop:(i-o)/t*100,ELtop_to_VPbottom:(a-e)/t*100,ELbottom_to_VPbottom:(a-i)/t*100,viewportHeight:t}},v.fn.isInViewport=function(){var t=v(this).percentOfViewport();return t.ELtop_to_VPtop<100&&0<t.ELbottom_to_VPtop},v(".sandwich").on("click touch",function(){v(this).toggleClass("active"),v(".header__navigation").slideToggle();var t=v(".header__wrapper--navigation");"40px"===t.css("padding-bottom")?t.removeAttr("style"):t.css({"padding-bottom":"40px"})}),v(".inp-phone").mask("+38 (999) 999-99-99");var t=new Swiper(".gallery > .gallery__preview.swiper-container",{direction:"vertical",slidesPerView:"auto",spaceBetween:8});new Swiper(".gallery > .gallery__media.swiper-container",{spaceBetween:0,thumbs:{swiper:t}}),new Swiper(".offers-card__slider.swiper-container",{slidesPerView:"auto",direction:"horizontal",slidesOffsetBefore:240,slidesOffsetAfter:240,spaceBetween:6,navigation:{nextEl:".offers-card__navigation .slider-nav__next",prevEl:".offers-card__navigation .slider-nav__prev"}}),new Swiper(".benefits-card__slider.swiper-container",{slidesPerView:"auto",direction:"horizontal",slidesOffsetBefore:240,slidesOffsetAfter:240,spaceBetween:40,navigation:{nextEl:".benefits-card__navigation .slider-nav__next",prevEl:".benefits-card__navigation .slider-nav__prev"}}),new Swiper(".reviews > .swiper-container",{slidesPerView:3,spaceBetween:30,pagination:{el:".reviews > .swiper-pagination-clickable",clickable:!0}});var e=v(t=".product-slider");0<e.length&&new Swiper(t,{slidesPerView:"auto",spaceBetween:120,threshold:20,speed:800,initialSlide:(parseInt(e.data("initial-slide"))||1)-1,loop:!1,observer:!0,autoHeight:!1,observeParents:!0,slideToClickedSlide:!0,observeSlideChildren:!0,centeredSlides:!0,hashNavigation:{replaceState:!0,watchState:!0},on:{init:function(){App.isScrollTopBody=!1},slideChange:function(){var t=App.$modelsMenu.find("a");t.removeClass("active"),t.eq(this.realIndex).addClass("active").trigger("classChange"),App.isScrollTopBody||App.scrollTopBody(App.$modelsMenu)}}}),App.$body.on("click touch",".open-dialog, .open-popup, .open-form, .open-modal",function(t){t.preventDefault();var t=v(this).attr("href"),e=v(".dialogs");let i=e.find(t);var o=e.find(".flex-popup"),a=t.slice(1);return"policy"!==a&&localStorage.setItem("popup",a),"list"===a&&(App.$body.css({"overflow-y":"hidden"}),e.css({"overflow-y":"hidden"})),"work-offer"!==a&&"details"!==a||(App.$body.css({"overflow-y":"hidden"}),e.css({"overflow-y":"auto"})),e.find(".popup").removeClass("active").hide(),i.length?(e.find(".popup").removeClass("active").hide(),i.show(),e.show(),o.addClass("popup--"+a),e.animate({opacity:1},300,()=>{i.addClass("active"),App.$body.css({"overflow-y":"hidden"})}),"gallery"===a&&(e=v(this).attr("data-product"),o.find(".popup__content .popup-gallery").hide(),o.find(`.popup__content .popup-gallery[data-gallery="product-${e}"]`).show(),a=e,o=new Swiper(`.popup-gallery[data-gallery="product-${a}"] > .popup-gallery__preview`,{direction:"vertical",slidesPerView:"auto",spaceBetween:8}),new Swiper(`.popup-gallery[data-gallery="product-${a}"] > .popup-gallery__media`,{spaceBetween:0,thumbs:{swiper:o}})),c(".swiper-slide")):console.log(`Попап с ID ${t} не найден.`),!1}),v(".dialogs").on("click touch",".close, .close-bg",function(){let t=v(".dialogs"),e=t.find(".flex-popup");var i,o,a=t.find(".popup.active").attr("id");let s=()=>{App.$body.css({"overflow-y":"auto"})},n=()=>{e.removeClass(function(t,e){return(e.match(/popup--\S+/g)||[]).join(" ")})},p=e.find(".popup.active");"cart"===a?p.animate({right:"-100%",opacity:0},600,function(){t.animate({opacity:0},300,function(){t.find(".popup").removeClass("active").hide(),p.removeAttr("style"),t.hide(),t.find(".thanks-popup").hide(),n()}),s()}):"policy"===a?(p.removeClass("active").hide(),i=localStorage.getItem("popup"),(o=v(".dialogs #"+i)).length?(o.addClass("active").show(),t.show()):console.log("Попап с ID "+i+" не найден.")):"details"===a?p.animate({top:"100%",opacity:0},600,function(){t.animate({opacity:0},400,function(){t.find(".popup").removeClass("active").hide(),p.removeAttr("style"),t.hide(),n()}),s()}):"list"===a?p.animate({bottom:"-100%",opacity:0},600,function(){t.animate({opacity:0},300,function(){t.find(".popup").removeClass("active").hide(),p.removeAttr("style"),t.hide(),n()}),s()}):(p.removeClass("active").hide(),t.animate({opacity:0},300,function(){t.hide(),t.find(".thanks-popup").hide(),n(),s()})),c(".swiper-slide")}),v(document).on("keyup",function(t){"Escape"!==t.key&&27!==t.keyCode||(v(".dialogs .popup.active .close").trigger("click"),c(".swiper-slide"))});let i=".dropdown";function o(t){v(t).on("click touch",function(){var e=v(this),i=e.data("up-sell"),o=e.data("product"),a=v(`.popup-gallery[data-gallery="product-${o}"] .popup-gallery__media .swiper-wrapper .swiper-slide img`).first(),s=(0===a.length&&console.log(`Изображение для продукта ${o} не найдено.`),v(".header__cart")),n=s.find(".ico-cart");let p=s.find(".header__cart--count");var s=p.find(".count"),c=parseInt(s.text())+1;if(i)c<=99&&s.text(c),i=i,d=v(".popup-cart__products form"),(l=v(".banner-cart")).find(".banner-cart__up-sell").last().show(),l.find(`#up-sell-${i}.banner-cart__up-sell`).hide(),(l={1:{id:1,img:"assets/img/content/popup-cart-banner-2x.jpg",title:"Мышка-игрушка Mr. Pickles",discount:"-30%",price:"₴ 90",price_discount:"₴ 125"},2:{id:2,img:"assets/img/content/main-card-about-2x.jpg",title:"Домик для кота Mr. Whiskers",discount:"-20%",price:"₴ 150",price_discount:"₴ 200"}})[i]?(l=`
            <div class="popup-cart__product popup-cart__up-sell">
                <div class="popup-cart__item">
                    <div class="popup-cart__item--photo">
                        <img src="${(l=l[i]).img}" alt="${l.title}">
                    </div>
                </div>
                <div class="popup-cart__item">
                    <div class="popup-cart__title">
                        <h4 class="body-s-reg">${l.title}</h4>
                    </div>
                    <div class="popup-cart__details">
                        <div class="popup-cart__calc">
                            <span class="tag tag--discount">${l.discount}</span>
                        </div>
                        <div class="popup-cart__price">
                            <s class="banner-cart__discount">${l.price_discount}</s>
                            <p class="body-s-sb">${l.price}</p>
                        </div>
                    </div>
                </div>
            </div>
        `,0===(r=d.find(".popup-cart__product")).length?d.prepend(l):r.last().after(l),f(d)):console.log(`Товар с ID ${i} не найден.`);else{var r=a.prop("naturalWidth"),l=a.prop("naturalHeight");let t=a.clone().addClass("fly-image").appendTo("body");var d=e.offset(),i=d.left+e.outerWidth()/2,a=d.top+e.outerHeight()/2-3*e.outerHeight(),e=n.offset(),u=e.left+n.width()/2,e=e.top+n.height()/2,n=(t.css({top:a-l/2,left:i-r/2,width:r,height:l,position:"absolute",zIndex:1e3,pointerEvents:"none"}),n.width()/r),u=(t.css({transition:"transform 1000ms ease-in-out, opacity 1000ms ease-in-out",transformOrigin:"center center",transform:`translate(${u-i}px, ${e-a}px) scale(${n})`,opacity:.3}),{1:{id:o,img:"assets/img/catalog/grace-pro-black-2x.png",title:"Кiгтеточка-лежанка Grace Pro Max",price:"₴ 1590",tag_text:"Для притулку",tag_class:"gift"},2:{id:o,img:"assets/img/catalog/3in1-2x.png",title:"Cloud",price:"₴ 2590",tag_text:"Новинка",tag_class:"new"},3:{id:o,img:"assets/img/catalog/mouse-mr-pickles.png",title:"Мишка Мiстер Піклз",price:"₴ 1590",tag_text:"Новинка",tag_class:"new"},4:{id:o,img:"assets/img/catalog/pot-with-micro-greens.png",title:"Горщик з мікрозеленню",price:"₴ 1590",tag_text:"Для притулку",tag_class:"gift"},5:{id:o,img:"assets/img/catalog/t-shirt-cat-parents.png",title:"Футболка котобатьків",price:"₴ 1590",tag_text:"Для притулку",tag_class:"gift"}});u[o]?(e=`
                    <div class="popup-cart__product">
                        <div class="popup-cart__item ">
                            <div class="popup-cart__item--photo">
                                <a href="/catalog.html" class="tag tag--${(i=u[o]).tag_class}">${i.tag_text}</a>
                                <img src="${i.img}" alt="${i.title}">
                            </div>
                        </div>
                        <div class="popup-cart__item">
                            <div class="popup-cart__title">
                                <h4 class="body-s-reg">${i.title}</h4>
                            </div>
                            <div class="popup-cart__details">
                                <div class="popup-cart__calc">
                                    <button class="minus"></button>
                                    <input type="text" id="quantity_${i.id}" name="quantity[]" name="cart[хешWoo][qty]" class="quantity body-s-sb" value="1" />
                                    <button class="plus"></button>
                                </div>
                                <div class="popup-cart__price">
                                    <p class="body-s-sb">${i.price}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                `,(a=v(".popup-cart__products form")).prepend(e),f(a),(n=a.find(".popup-cart__product").first()).find(".popup-cart__calc .quantity").val(1),n.find(".popup-cart__calc").each(function(){var t=v(this);t.on("click touch",".minus",function(){var t=v(this).siblings(".quantity"),e=parseInt(t.val(),10);1<e&&t.val(e-1)}),t.on("click touch",".plus",function(){var t=v(this).siblings(".quantity"),e=parseInt(t.val(),10);t.val(e+1)}),t.on("input",".quantity",function(){var t=v(this).val();(!/^\d+$/.test(t)||parseInt(t,10)<1)&&v(this).val(1)})}),c<=99&&s.text(c),setTimeout(()=>{t.remove(),p.show()},1e3)):console.log(`Товар с ID ${o} не найден.`)}})}function f(t){3<t.find(".popup-cart__product").length&&(v(".popup-cart").css("margin-bottom","155px"),v(".banner-cart").css("margin","20px 0"),t.find(".popup-cart__totals.responsive").addClass("popup-cart__responsive"),t.find(".banner-cart__up-sell.responsive").addClass("banner-cart__responsive"))}function c(t){v(t).find("video").each(function(){this.pause()})}v(i).on("click touch",i+"__item",function(t){v(this).toggleClass("active").trigger("filtered"),t.stopPropagation()}),v(i).on("filtered",i+"__item",function(){var t=v(this).closest(i),e=v(".filtered-list");let o=t.find(i+"__item.active").map(function(){return v(this).data("filter")}).get();t=e.find(".reviews__item");if(t.hide().removeClass("left right"),0<o.length){let i=[],e=(t.each(function(){var t=v(this);let e=t.data("filter").split(" ");o.some(t=>e.includes(t))&&i.push(t)}),0);i.forEach(t=>{t.show().addClass(e%2==0?"left":"right"),e++})}else t.show();t=e.find(".reviews__item:visible");t.removeClass("margin-top-reset"),t.each(function(t){t<=0&&v(this).addClass("margin-top-reset")})}),v(document).on("click touch",".mini-card__option--link",function(t){t.preventDefault();var e,i,t=v(this).data("mini-card-option");t&&(i=(e=v(this).closest(".mini-card")).find(".mini-card-img"),e.find(".mini-card__option--link").removeClass("active"),v(this).addClass("active"),i.removeClass("active").hide(),e.find(".mini-card-img.img-"+t).addClass("active").fadeIn())}),v(document).on("click touch",".product-card__option--link",function(t){t.preventDefault();var e,i,t=v(this).data("product-card-option");t&&(e=v(this).data("product-card-title"))&&((i=v(this).closest(".product-card__option")).find(".product-card__option--title").text(e),i.find(".product-card__option--link").removeClass("active"),v(this).addClass("active"),console.log(t))}),v(window).on("load",function(){t=(t=[".dropdown-language",".dropdown-filter",".dropdown-category",".dropdown-sort"]).join(","),v(document).on("click touch",t,function(t){var e=v(this).next(i);if(!e.hasClass("active"))return v(i).removeClass("active"),e.addClass("active"),t.stopPropagation(),!1;e.removeClass("active")}),v(document).on("click touch",function(t){v(t.target).closest(i).length||v(i).removeClass("active")});{var t=".catalog-view a";let i=v(t);i.on("click",function(t){t.preventDefault();var t=v(this).data("view"),e=(i.removeClass("active"),v(this).addClass("active"),v(".view__wrapper"));e.removeClass(function(t,e){return(e.match(/view__wrapper--\S+/g)||[]).join(" ")}),t&&"default"!==t&&e.addClass("view__wrapper--"+t)})}}),o(".product-card__buttons .add_to_cart"),o(".banner-cart__up-sell .add_to_cart"),v(window).on("load scroll",function(){v(window).scrollTop(),v(".js-wait-animation").each(function(){v(this).isInViewport()?v(this).addClass("animate").removeClass("out-of-viewport"):v(this).addClass("out-of-viewport")})}),v(function(){v(".video-block__source").each(function(){{var i=this;let t=(i=v(i)).find("video"),e=(i=i.find(".video-block__button--mp4")).find(".ico-video-button > use");i.on("click",function(){v(".video-block__source video").each(function(){this!==t[0]&&(this.pause(),v(this).closest(".video-block__source").find(".ico-video-button > use").attr("href","assets/img/sprite.svg#ico-play"))}),t[0].paused?(t[0].play(),t.hasClass("cover")&&t.css("object-fit","cover"),e.attr("href","assets/img/sprite.svg#ico-pause")):(t[0].pause(),e.attr("href","assets/img/sprite.svg#ico-play"))})}});{let e=App.$modelsMenu.find("a");function i(t){var e=App.$modelsMenu.outerWidth(),i=App.$modelsMenu.scrollLeft(),o=t.offset().left-App.$modelsMenu.offset().left,t=t.outerWidth();App.$modelsMenu.animate({scrollLeft:i+o-e/2+t/2},300)}e.on("click touch",function(){var t=v(this);e.removeClass("active"),t.addClass("active"),i(t)});var t=e;t.length&&i(t)}{var s=".thank-page__button",n=".thank-page__play--text",p=".thank-page__item";t=v(t=".thank-page__video");let e=v(p),i=t.find("video"),o=t.find(s),a=t.find(n);function c(t,e,i){t.on(e,function(){o.css("opacity",i)})}i.on("pause",function(){o.show(),o.css("opacity","1"),e.css("position","relative"),i.removeAttr("style")}),o.on("click",function(t){i[0].paused?(i[0].play(),o.css("opacity",".5"),a.hide(),e.css("position","static"),i.css({position:"absolute",top:0,left:0})):(i[0].pause(),o.css("opacity","1"),a.show(),e.css("position","relative"),i.removeAttr("style"))}),i.on("click",function(){this.played&&(this.pause(),o.css("opacity","1"),a.show(),e.css("position","relative"),i.removeAttr("style"))}),c(o,"mouseenter","1"),c(t,"mouseleave","1"),c(o,"mouseleave",".5"),v(document).on("keyup",function(t){"Escape"!==t.key&&27!==t.keyCode||i[0].played&&(i[0].pause(),o.show(),a.show(),o.css("opacity","1"),e.css("position","relative"),i.removeAttr("style"))})}var o,a,e;o=".accordion__content",a=".accordion__item",v(".accordion-open").on("click",function(t){t.preventDefault();var t=v(this).closest(a),e=t.find(o);t.hasClass("active")?(t.removeClass("active"),e.stop(!0,!0).slideUp()):(t.siblings().removeClass("active").find(o).slideUp(),t.addClass("active"),e.stop(!0,!0).slideDown())});{var r=120,l="fixed";let t=v(p=".section--reviews > .section__wrapper");v(window).on("scroll",function(){v(window).scrollTop()>=r?t.hasClass(l)||t.addClass(l):t.removeClass(l)})}s=".dialogs",(e="img")!==e&&"video"!==e?console.log('Invalid mediaType. Use "img" or "video".'):v(s).find(e).each(function(){"img"===e?(new Image).src=v(this).attr("src"):"video"===e&&this.load()}),App.$body.on("click touch",".choose-product",()=>{0<App.$modelsMenu.length&&App.scrollTopBody(App.$modelsMenu)}),0<App.$modelsMenu.length&&(App.$modelsMenu.find("a.active").attr("href")!==App.winLocHash&&"#choose-product"!==App.winLocHash||App.scrollTopBody(App.$modelsMenu))})})(jQuery);
//# sourceMappingURL=main.js.map
