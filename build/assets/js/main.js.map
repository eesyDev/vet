{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["(function ($) {\n    window.App = window.App || {};\n\n    App.isScrollTopBody  = true;\n    App.winLocHash       = window.location.hash;\n    App.$body            = $('body');\n    App.$htmlBody        = $('html, body');\n    App.$modelsMenu      = $('.slider-menu .models-menu');\n    App.$productsMobile  = $('.products-mobile');\n    App.$headerMobile    = $('.header-mobile');\n    App.$currentProduct  = null;\n    App.$nextProduct     = null;\n\n    /**\n     * Animate scroll top to element\n     *\n     * @param {Object|string} $element jQuery object or selector string.\n     * @param {Number} [indent=54] indent to the desired element in px.\n     * @param {Number} [duration=600] animation time in milliseconds.\n     *\n     * @example\n     * // Using a jQuery object\n     * App.scrollTopBody($('.element'));\n     *\n     * @example\n     * // Using a selector string\n     * App.scrollTopBody('.element');\n     *\n     * @example\n     * // Using a custom indent and duration\n     * App.scrollTopBody('.element', 80, 1000);\n     */\n    App.scrollTopBody = function($element, indent = 54, duration = 600) {\n        if (typeof $element === 'string') {\n            $element = $($element);\n        }\n\n        if ($element.length) {\n            App.$htmlBody.animate({\n                scrollTop: $element.offset().top - indent\n            }, duration);\n        }\n    };\n\n    /**\n     * Инициализирует функциональность загрузки файла с возможностью выбора файла по клику на указанный элемент.\n     * Если длина имени выбранного файла превышает maxLength, сохраняются начало и конец строки, а середина заменяется на '...'.\n     *\n     * @param {string} triggerSelector - Селектор элемента, клик по которому вызывает выбор файла.\n     * @param {string} inputSelector - Селектор скрытого <input type=\"file\">.\n     * @param {string} textSelector - Селектор элемента, в который будет выводиться название выбранного файла.\n     * @param {number} [maxLength=20] - Максимальная длина текста для отображения имени файла. По умолчанию 20 символов.\n     */\n    App.initFileUpload = function(triggerSelector, inputSelector, textSelector, maxLength = 20) {\n        $(triggerSelector).on('click', function () {\n            $(inputSelector).trigger('click');\n        });\n\n        $(inputSelector).on('change', function () {\n            let fileName = this.files[0]?.name || 'Файл не обрано';\n\n            if (fileName.length > maxLength) {\n                const extIndex = fileName.lastIndexOf('.');\n                const extension = extIndex !== -1 ? fileName.slice(extIndex) : ''; // Расширение файла\n                const visibleLength = maxLength - extension.length - 3; // Учёт места под '...'\n\n                if (visibleLength > 0) {\n                    const start = fileName.slice(0, Math.ceil(visibleLength / 2)); // Начало имени\n                    const end = fileName.slice(-Math.floor(visibleLength / 2)); // Конец имени\n                    fileName = `${start}...${end}${extension}`;\n                }\n            }\n\n            $(textSelector).text(fileName);\n        });\n    };\n\n    // lazy load for images\n    App.lazyLoadImages = function () {\n        $('img[data-src]').each(function () {\n            let $img = $(this);\n            if ($img.isInViewportImg() && !$img.data('loaded')) {\n                let src = $img.attr('data-src');\n                let srcset = $img.attr('data-srcset');\n\n                if (src) $img.attr('src', src);\n                if (srcset) $img.attr('srcset', srcset);\n                $img.data('loaded', true);\n                $img.hide().fadeIn(400);\n            }\n        });\n    };\n\n    App.isMobileDevice = function(maxWidth = 768) {\n        return window.innerWidth < maxWidth;\n    };\n\n    App.headerMobileClick = function(el, indent = 48) {\n        $(el).on('click touch', function (e) {\n            e.preventDefault();\n            if (App.$nextProduct) {\n                App.scrollTopBody(App.$nextProduct, indent);\n            } else {\n                App.scrollTopBody($('.products-mobile__item').first(), indent);\n            }\n        });\n    };\n\n    App.updateHeaderOnScroll = function () {\n        const $headerTitle  = App.$headerMobile.find('.header-mobile__title > p');\n        const $headerArrow  = App.$headerMobile.find('.header-mobile__arrow');\n        const $headerButton = App.$headerMobile.find('.header-mobile__button > .button');\n        const $items = $('.products-mobile__item');\n\n        const scrollTop = $(window).scrollTop();\n        let isCurrentProductFound = false;\n        let allItemsScrolledPast = true;\n\n        App.$currentProduct = null;\n        App.$nextProduct = null;\n\n        $items.each(function (index) {\n            const $item = $(this);\n            const itemTop = $item.offset().top;\n            const itemBottom = itemTop + $item.outerHeight();\n\n            if (!isCurrentProductFound && itemTop <= scrollTop + 148 && itemBottom > scrollTop + 48) {\n                App.$currentProduct = $item;\n                App.$nextProduct = $items.eq(index + 1);\n                isCurrentProductFound = true;\n            }\n\n            if (itemBottom >= scrollTop) {\n                allItemsScrolledPast = false;\n            }\n        });\n        if (App.$currentProduct) {\n            if (!App.$headerMobile.is(':visible')) {\n                $('.header').css('visibility', 'hidden');\n                App.$headerMobile.css('display', 'flex');\n            }\n\n            const newTitle = App.$currentProduct.find('h2').text();\n            const newProduct = App.$currentProduct ? App.$currentProduct.find('.products-mobile__actions .add_to_cart').data('product') : 0;\n            const newAnchor = App.$nextProduct ? App.$nextProduct.data('product-anchor') : '#';\n\n            if ($headerTitle.text() !== newTitle) {\n                $headerTitle.text(newTitle);\n            }\n\n            if (newProduct > 0) {\n                $headerButton.attr('data-product', newProduct)\n            }\n\n            $headerArrow.attr('href', newAnchor);\n\n        } else {\n            if (App.$headerMobile.is(':visible')) {\n                App.$headerMobile.fadeOut();\n                $('.header').css('visibility', 'visible');\n            }\n        }\n    };\n\n    $.fn.isInViewportImg = function () {\n        let elementTop = $(this).offset().top;\n        let elementBottom = elementTop + $(this).outerHeight();\n        let viewportTop = $(window).scrollTop();\n        let viewportBottom = viewportTop + $(window).height();\n\n        return elementBottom > viewportTop && elementTop < viewportBottom;\n    };\n\n    $(window).on('load scroll resize', App.lazyLoadImages);\n\n    // calc block position in viewport\n    $.fn.percentOfViewport = function() {\n        let viewportHeight = $(window).height();\n\n        let elementTop = $(this).offset().top;\n        let elementBottom = elementTop + $(this).height();\n\n\n        let viewportTop = $(window).scrollTop();\n        let viewportBottom = viewportTop + viewportHeight;\n        //let viewportCenter = viewportTop + (viewportHeight/2);\n\n        let top_to_top_percent = (elementTop - viewportTop) / viewportHeight * 100;\n        let bottom_to_top_percent = (elementBottom - viewportTop) / viewportHeight * 100;\n\n        let top_to_bottom_percent = (viewportBottom - elementTop) / viewportHeight * 100;\n        let bottom_to_bottom_percent = (viewportBottom - elementBottom) / viewportHeight * 100;\n\n        return {\n            ELtop_to_VPtop:     top_to_top_percent,\n            ELbottom_to_VPtop:  bottom_to_top_percent,\n            ELtop_to_VPbottom:  top_to_bottom_percent,\n            ELbottom_to_VPbottom:  bottom_to_bottom_percent,\n            viewportHeight: viewportHeight\n        };\n    };\n\n    // check is block is in viewport\n    $.fn.isInViewport = function() {\n        let p = $(this).percentOfViewport();\n\n        return  p.ELtop_to_VPtop < 100 &&\n            p.ELbottom_to_VPtop > 0;\n    };\n\n    // sandwich menu toggle\n    $('.sandwich').on('click touch', function () {\n        $(this).toggleClass('active');\n        $('.header__navigation').slideToggle();\n\n        let navigationWrapper = $(\".header__wrapper--navigation\");\n        if (navigationWrapper.css(\"padding-bottom\") === \"40px\") {\n            navigationWrapper.removeAttr(\"style\");\n        } else {\n            navigationWrapper.css({\n                \"padding-bottom\": \"40px\",\n            });\n        }\n\n    });\n\n    $('.inp-phone').mask('+38 (999) 999-99-99');\n\n    /**\n     * @typedef {import('node_modules/swiper').Swiper} Swiper\n     */\n    const previewProductCard = new Swiper(\".gallery > .gallery__preview.swiper-container\", {\n        direction: 'vertical',\n        slidesPerView: 'auto',\n        spaceBetween: 8,\n    });\n\n    const mainProductCard = new Swiper(\".gallery > .gallery__media.swiper-container\", {\n        spaceBetween: 0,\n        thumbs: {\n            swiper: previewProductCard,\n        },\n        pagination: {\n            el: '.product-card__wrapper > .flex > .swiper-pagination-clickable',\n            clickable: true,\n        }\n    });\n\n    const offersCardSlider = new Swiper(\".offers-card__slider.swiper-container\", {\n        slidesPerView: 'auto',\n        direction: 'horizontal',\n        spaceBetween: 6,\n        navigation: {\n            nextEl: \".offers-card__navigation .slider-nav__next\",\n            prevEl: \".offers-card__navigation .slider-nav__prev\",\n        },\n        breakpoints: {\n            319: {\n                slidesOffsetBefore: 20,\n                slidesOffsetAfter: 20,\n            },\n            769: {\n                slidesOffsetBefore: 240,\n                slidesOffsetAfter: 240,\n            }\n        }\n    });\n\n    const benefitsCardSlider = new Swiper(\".benefits-card__slider.swiper-container\", {\n        slidesPerView: 'auto',\n        direction: 'horizontal',\n        spaceBetween: 40,\n        navigation: {\n            nextEl: \".benefits-card__navigation .slider-nav__next\",\n            prevEl: \".benefits-card__navigation .slider-nav__prev\",\n        },\n        breakpoints: {\n            319: {\n                spaceBetween: 20,\n                slidesOffsetBefore: 20,\n                slidesOffsetAfter: 20,\n            },\n            769: {\n                spaceBetween: 40,\n                slidesOffsetBefore: 240, // смещение слева в px\n                slidesOffsetAfter: 240, // смещение справа в px\n            }\n        }\n    });\n\n    const reviewsSlider = new Swiper('.reviews > .swiper-container', {\n        pagination: {\n            el: '.reviews > .swiper-pagination-clickable',\n            clickable: true,\n        },\n        breakpoints: {\n            319: {\n                slidesPerView: 'auto',\n                spaceBetween: 20,\n                slidesOffsetBefore: 20,\n                slidesOffsetAfter: 20,\n            },\n            769: {\n                slidesPerView: 3,\n                spaceBetween: 30,\n            }\n        }\n    });\n\n    const articleRelatedSlider = new Swiper('.article-related .swiper-container', {\n        autoHeight: false,\n        autoplay: {\n            delay: 2000,\n        },\n        breakpoints: {\n            319: {\n                slidesPerView: 'auto',\n                spaceBetween: 20,\n                slidesOffsetBefore: 20,\n                slidesOffsetAfter: 20,\n            },\n            769: {\n                slidesPerView: 3,\n                spaceBetween: 30,\n            }\n        }\n    });\n\n    function productsSlider(swiperContainer) {\n        const swiper = document.querySelectorAll(swiperContainer);\n        swiper.forEach((container) => {\n            new Swiper(container, {\n                slidesPerView: 'auto',\n                autoHeight: container.dataset.autoHeight === \"true\" || false, // default false\n                spaceBetween: 20,\n                centeredSlides: true,\n                slideToClickedSlide: true,\n                pagination: {\n                    el: container.nextElementSibling,\n                    clickable: true,\n                },\n            });\n        });\n    }\n\n    function popupGallery(product) {\n\n        const previewPopUpGallery = new Swiper(`.popup-gallery[data-gallery=\"product-${product}\"] > .popup-gallery__preview`, {\n            slidesPerView: 'auto',\n            spaceBetween: 8,\n            threshold: 8,\n            breakpoints: {\n                320: {\n                    direction: 'horizontal',\n                    slidesOffsetBefore: 20,\n                    slidesOffsetAfter: 20,\n                },\n                480: {\n                    direction: 'horizontal',\n                    slidesOffsetBefore: 20,\n                    slidesOffsetAfter: 20,\n                },\n                640: {\n                    direction: 'vertical',\n                }\n            }\n        });\n\n        const mainPopUpGallery = new Swiper(`.popup-gallery[data-gallery=\"product-${product}\"] > .popup-gallery__media`, {\n            spaceBetween: 0,\n            thumbs: {\n                swiper: previewPopUpGallery,\n            }\n        });\n    }\n\n    const PRODUCT_CLASS_SLIDER = '.product-slider';\n    const $productSlider = $(PRODUCT_CLASS_SLIDER);\n\n    if ($productSlider.length > 0) {\n\n        const prodSlider = new Swiper(PRODUCT_CLASS_SLIDER, {\n            slidesPerView: 'auto',\n            spaceBetween: 120,\n            threshold: 20,\n            speed: 800,\n            initialSlide: (parseInt($productSlider.data('initial-slide')) || 1) - 1, // активный слайд\n            loop: false,\n            observer: true,\n            autoHeight: false,\n            observeParents: true,\n            slideToClickedSlide: true,\n            observeSlideChildren: true,\n            centeredSlides: true,\n            hashNavigation: {\n                replaceState: true,\n                watchState: true,\n            },\n            on: {\n\n                init: function () {\n                    App.isScrollTopBody = false;\n                },\n\n                slideChange: function () {\n                    const $item = App.$modelsMenu.find('a');\n                    $item.removeClass('active');\n                    $item.eq(this.realIndex).addClass('active').trigger('classChange');\n\n                    if (!App.isScrollTopBody) {\n                        App.scrollTopBody(App.$modelsMenu);\n                    }\n                }\n            }\n        });\n    }\n\n    // opening popups\n    App.$body.on('click touch', '.open-dialog, .open-popup, .open-form, .open-modal', function (event) {\n        event.preventDefault();\n\n        const category = $(this).attr('href');\n        const $dialogs = $('.dialogs');\n        const $categoryDialogs = $dialogs.find(category);\n        const $flexPopup = $dialogs.find('.flex-popup');\n        const popupCategory = category.slice(1);\n\n        if (popupCategory !== 'policy') {\n            localStorage.setItem('popup', popupCategory);\n        }\n\n        if (popupCategory === 'list') {\n            App.$body.css({ 'overflow-y': 'hidden' });\n            $dialogs.css({ 'overflow-y': 'hidden' });\n        }\n\n        if ( popupCategory === 'work-offer' || popupCategory === 'details' ) {\n            App.$body.css({ 'overflow-y': 'hidden' });\n            $dialogs.css({ 'overflow-y': 'auto' });\n        }\n\n        $dialogs.find('.popup').removeClass('active').hide();\n\n        if (!$categoryDialogs.length) {\n            console.log(`Попап с ID ${category} не найден.`);\n            return false;\n        }\n\n        $dialogs.find('.popup').removeClass('active').hide();\n        $categoryDialogs.show();\n        $dialogs.show();\n\n        $flexPopup.addClass('popup--' + popupCategory);\n        $dialogs.animate({ opacity: 1 }, 300, () => {\n            $categoryDialogs.addClass('active');\n            App.$body.css({ 'overflow-y': 'hidden' });\n        });\n\n        if (popupCategory === 'gallery') {\n            const product = $(this).attr('data-product');\n            $flexPopup.find(`.popup__content .popup-gallery`).hide();\n            const $productGallery = $flexPopup.find(`.popup__content .popup-gallery[data-gallery=\"product-${product}\"]`);\n            $productGallery.show();\n            popupGallery(product);\n        }\n\n        pauseOtherVideos('.swiper-slide');\n\n        return false;\n    });\n\n    // closing popups\n    $('.dialogs').on('click touch', '.close, .close-bg', function () {\n        const $dialogs = $('.dialogs');\n        const $flexPopup = $dialogs.find('.flex-popup');\n        const $activePopup = $dialogs.find('.popup.active');\n        const popupId = $activePopup.attr('id');\n\n        const bodyScroll = () => {\n            App.$body.css({ 'overflow-y': 'auto' });\n        };\n\n        const removeClassPopup = () => {\n            $flexPopup.removeClass(function (index, className) {\n                return (className.match(/popup--\\S+/g) || []).join(' ');\n            });\n        };\n\n        const $popupActive = $flexPopup.find('.popup.active');\n\n        if (popupId === 'cart') { // Корзина\n            $popupActive.animate({ right: '-100%', opacity: 0 }, 600, function () {\n                $dialogs.animate({ opacity: 0 }, 300, function () {\n                    $dialogs.find('.popup').removeClass('active').hide();\n                    $popupActive.removeAttr('style');\n                    $dialogs.hide();\n                    $dialogs.find('.thanks-popup').hide();\n                    removeClassPopup();\n                });\n                bodyScroll();\n            });\n\n        } else if (popupId === 'policy') { // Политика конфиденциальности\n\n            $popupActive.removeClass('active').hide();\n\n            let popupCategory = localStorage.getItem('popup');\n\n            // Открываем popup с соответствующим ID\n            const $popupToOpen = $('.dialogs #' + popupCategory);\n            if ($popupToOpen.length) {\n                $popupToOpen.addClass('active').show();\n                $dialogs.show();\n            } else {\n                console.log('Попап с ID ' + popupCategory + ' не найден.');\n            }\n\n        } else if (popupId === 'details') { // Детали преимуществ\n\n            $popupActive.animate({ top: '100%', opacity: 0 }, 600, function () {\n                $dialogs.animate({ opacity: 0 }, 400, function () {\n                    $dialogs.find('.popup').removeClass('active').hide();\n                    $popupActive.removeAttr('style');\n                    $dialogs.hide();\n                    removeClassPopup();\n                });\n                bodyScroll();\n            });\n\n        } else if (popupId === 'list') { // Список приютов\n\n            $popupActive.animate({ bottom: '-100%', opacity: 0 }, 600, function () {\n                $dialogs.animate({ opacity: 0 }, 300, function () {\n                    $dialogs.find('.popup').removeClass('active').hide();\n                    $popupActive.removeAttr('style');\n                    $dialogs.hide();\n                    removeClassPopup();\n                });\n                bodyScroll();\n            });\n\n        } else { // Остальные окна\n\n            $popupActive.removeClass('active').hide();\n            $dialogs.animate({ opacity: 0 }, 300, function () {\n                $dialogs.hide();\n                $dialogs.find('.thanks-popup').hide();\n                removeClassPopup();\n                bodyScroll();\n            });\n        }\n        pauseOtherVideos('.swiper-slide');\n    });\n\n    // closing popups pressing esc\n    $(document).on('keyup', function (e) {\n        if (e.key === 'Escape' || e.keyCode === 27) {\n            $('.dialogs .popup.active .close').trigger('click');\n            pauseOtherVideos('.swiper-slide');\n        }\n    });\n\n    const DROPDOWN_CLASS = '.dropdown';\n\n    function initDropdownToggle(btnSelectors) {\n        const selectors = btnSelectors.join(',');\n\n        $(document).on('click touch', selectors, function (e) {\n            const $filter = $(this).next(DROPDOWN_CLASS);\n            if ($filter.hasClass('active')) {\n                $filter.removeClass('active');\n                return;\n            }\n\n            $(DROPDOWN_CLASS).removeClass('active');\n            $filter.addClass('active');\n            e.stopPropagation();\n            return false;\n        });\n\n        $(document).on('click touch', function (e) {\n            if (!$(e.target).closest(DROPDOWN_CLASS).length) {\n                $(DROPDOWN_CLASS).removeClass('active');\n            }\n        });\n    }\n\n    $(DROPDOWN_CLASS).on('click touch', DROPDOWN_CLASS + '__item', function (e) {\n        $(this).toggleClass('active').trigger('filtered');\n        e.stopPropagation();\n    });\n\n\n    $(DROPDOWN_CLASS).on('filtered', DROPDOWN_CLASS + '__item', function () {\n        const $filter = $(this).closest(DROPDOWN_CLASS);\n        const $list = $('.filtered-list');\n\n        const activeFilters = $filter.find(DROPDOWN_CLASS + '__item.active').map(function () {\n            return $(this).data('filter');\n        }).get();\n\n        // Получаем все элементы\n        const $items = $list.find('.reviews__item');\n        $items.hide().removeClass('left right');\n\n        if (activeFilters.length > 0) {\n            const filteredItems = [];\n\n            $items.each(function () {\n                const $item = $(this);\n                const itemFilters = $item.data('filter').split(' ');\n\n                if (activeFilters.some(filter => itemFilters.includes(filter))) {\n                    filteredItems.push($item);\n                }\n            });\n\n            let index = 0;\n            filteredItems.forEach((item) => {\n                item.show().addClass(index % 2 === 0 ? 'left' : 'right');\n                index++;\n            });\n        } else {\n            $items.show();\n        }\n\n        const $visible = $list.find('.reviews__item:visible');\n        $visible.removeClass('margin-top-reset');\n        $visible.each(function (index) {\n            if (index <= 0) {\n                $(this).addClass('margin-top-reset');\n            }\n        });\n    });\n\n\n    // Универсальный переключатель с поддержкой любых количеств видов сеток\n    function viewGridSwitcher(btnSelector) {\n        const $btnSelector = $(btnSelector);\n        $btnSelector.on('click', function (e) {\n            e.preventDefault();\n            const view = $(this).data('view');\n            $btnSelector.removeClass('active');\n            $(this).addClass('active');\n            const $wrapper = $('.view__wrapper');\n            $wrapper.removeClass(function (index, className) {\n                return (className.match(/view__wrapper--\\S+/g) || []).join(' ');\n            });\n            if (view && view !== 'default') {\n                $wrapper.addClass(`view__wrapper--${view}`);\n            }\n        });\n    }\n\n    $(document).on('click touch', '.mini-card__option--link', function (e) {\n        e.preventDefault();\n        const optionValue = $(this).data('mini-card-option'); // ID товара или опции\n        if (!optionValue) return;\n        const $card = $(this).closest('.mini-card');\n        const $images = $card.find('.mini-card-img');\n        $card.find('.mini-card__option--link').removeClass('active');\n        $(this).addClass('active');\n        $images.removeClass('active').hide();\n        $card.find(`.mini-card-img.img-${optionValue}`).addClass('active').fadeIn();\n    });\n\n    $(document).on('click touch', '.product-card__option--link', function (e) {\n        e.preventDefault();\n        const optionValue = $(this).data('product-card-option'); // ID товара или опции\n        if (!optionValue) return;\n        const newTitle = $(this).data('product-card-title');\n        if (!newTitle) return;\n        const $optionContainer = $(this).closest('.product-card__option');\n        $optionContainer.find('.product-card__option--title').text(newTitle);\n\n        $optionContainer.find('.product-card__option--link').removeClass('active');\n        $(this).addClass('active');\n\n        // тут на Ajax получаем нужные данные из Woo\n        console.log(optionValue);\n\n    });\n\n    function waitAnimation() {\n        let scrollTop = $(window).scrollTop();\n        // start animations when it is in viewport but pause when out of it\n        // .out-of-viewport doing nothing if animation item can be runned only once\n        $('.js-wait-animation').each(function(){\n            if ( $(this).isInViewport() ) {\n                $(this).addClass('animate')\n                    .removeClass('out-of-viewport');\n            } else {\n                $(this).addClass('out-of-viewport');\n            }\n        });\n    }\n\n    $(window).on('load', function () {\n        initDropdownToggle([\n            '.dropdown-language',\n            '.dropdown-filter',\n            '.dropdown-category',\n            '.dropdown-sort',\n        ]);\n        viewGridSwitcher('.catalog-view a');\n    });\n\n    // Купить продукт\n    function addToCart(btnSelector) {\n        const $btnSelector = $(btnSelector);\n        $btnSelector.on('click touch', function (e) {\n            e.preventDefault();\n            const $button = $(this);\n            const upSell  = $button.data('up-sell');  // post_ID\n            const product = $button.data('product'); // post_ID\n\n            const $productImage = $(`.popup-gallery[data-gallery=\"product-${product}\"] .popup-gallery__media .swiper-wrapper .swiper-slide img`).first();\n\n            if ($productImage.length === 0) {\n                console.log(`Изображение для продукта ${product} не найдено.`);\n            }\n\n            const $cartHeader = $('.header__cart');\n            const $cartIcon = $cartHeader.find('.ico-cart');\n            const $cartCount = $cartHeader.find('.header__cart--count');\n            const $cartCountText = $cartCount.find('.count');\n\n            let currentCount = parseInt($cartCountText.text());\n            let newCount = currentCount + 1;\n\n            if (!upSell) {\n\n                if (App.isMobileDevice() && App.$body.hasClass('lend-series-pro')) {\n                    $('.header').css({\n                        'visibility': 'visible',\n                        'z-index': 12,\n                    });\n                }\n\n                // Используем естественные размеры изображения\n                const imageWidth = $productImage.prop('naturalWidth');\n                const imageHeight = $productImage.prop('naturalHeight');\n\n                const $flyImage = $productImage.clone().addClass('fly-image').appendTo('body');\n\n                const buttonOffset = $button.offset();\n                const buttonCenterX = buttonOffset.left + $button.outerWidth() / 2;\n                const buttonCenterY = buttonOffset.top + $button.outerHeight() / 2 - ($button.outerHeight() * 3);\n\n                const cartOffset = $cartIcon.offset();\n                const cartCenterX = cartOffset.left + $cartIcon.width() / 2;\n                const cartCenterY = cartOffset.top + $cartIcon.height() / 2;\n\n                $flyImage.css({\n                    display: 'block',\n                    top: buttonCenterY - imageHeight / 2,\n                    left: buttonCenterX - imageWidth / 2,\n                    width: imageWidth,\n                    height: imageHeight,\n                    position: 'absolute',\n                    zIndex: 1000,\n                    pointerEvents: 'none'\n                });\n\n                const scale = $cartIcon.width() / imageWidth;\n\n                $flyImage.css({\n                    transition: 'transform 1000ms ease-in-out, opacity 1000ms ease-in-out',\n                    transformOrigin: 'center center',\n                    transform: `translate(${cartCenterX - buttonCenterX}px, ${cartCenterY - buttonCenterY}px) scale(${scale})`,\n                    opacity: 0.3\n                });\n\n                // Получаем данные для указанного ID продукта из Woo\n                const data = {\n                    1: {\n                        id: product,\n                        img: 'assets/img/catalog/grace-pro-black-2x.png',\n                        title: 'Кiгтеточка-лежанка Grace Pro Max',\n                        price: '₴ 1590',\n                        tag_text: 'Для притулку',\n                        tag_class: 'gift',\n                    },\n                    2: {\n                        id: product,\n                        img: 'assets/img/catalog/3in1-2x.png',\n                        title: 'Cloud',\n                        price: '₴ 2590',\n                        tag_text: 'Новинка',\n                        tag_class: 'new',\n                    },\n                    3: {\n                        id: product,\n                        img: 'assets/img/catalog/mouse-mr-pickles.png',\n                        title: 'Мишка Мiстер Піклз',\n                        price: '₴ 1590',\n                        tag_text: 'Новинка',\n                        tag_class: 'new',\n                    },\n                    4: {\n                        id: product,\n                        img: 'assets/img/catalog/pot-with-micro-greens.png',\n                        title: 'Горщик з мікрозеленню',\n                        price: '₴ 1590',\n                        tag_text: 'Для притулку',\n                        tag_class: 'gift',\n                    },\n                    5: {\n                        id: product,\n                        img: 'assets/img/catalog/t-shirt-cat-parents.png',\n                        title: 'Футболка котобатьків',\n                        price: '₴ 1590',\n                        tag_text: 'Для притулку',\n                        tag_class: 'gift',\n                    }\n                };\n\n                if (!data[product]) {\n                    console.log(`Товар с ID ${product} не найден.`);\n                    return;\n                }\n                const item = data[product];\n\n                const productHtml = `\n                    <div class=\"popup-cart__product\">\n                        <div class=\"popup-cart__item \">\n                            <div class=\"popup-cart__item--photo\">\n                                <a href=\"/catalog.html\" class=\"tag tag--${item.tag_class}\">${item.tag_text}</a>\n                                <img src=\"${item.img}\" alt=\"${item.title}\">\n                            </div>\n                        </div>\n                        <div class=\"popup-cart__item\">\n                            <div class=\"popup-cart__title\">\n                                <h4 class=\"body-s-reg\">${item.title}</h4>\n                            </div>\n                            <div class=\"popup-cart__details\">\n                                <div class=\"popup-cart__calc\">\n                                    <button class=\"minus\"></button>\n                                    <input type=\"text\" id=\"quantity_${item.id}\" name=\"quantity[]\" name=\"cart[хешWoo][qty]\" class=\"quantity body-s-sb\" value=\"1\" />\n                                    <button class=\"plus\"></button>\n                                </div>\n                                <div class=\"popup-cart__price\">\n                                    <p class=\"body-s-sb\">${item.price}</p>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                `;\n\n                const $product = $('.popup-cart__products form');\n\n                $product.prepend(productHtml);\n\n                if (App.isMobileDevice()) {\n                    responsiveCart($product, 2);\n                } else {\n                    responsiveCart($product);\n                }\n\n                const $productFirst = $product.find('.popup-cart__product').first();\n                $productFirst.find('.popup-cart__calc .quantity').val(1);\n                initQuantityInput($productFirst);\n\n                if (newCount <= 99) $cartCountText.text(newCount);\n\n                setTimeout(() => {\n                    $flyImage.remove();\n                    $cartCount.show();\n\n                    if (App.isMobileDevice() && App.$body.hasClass('lend-series-pro')) {\n                        setTimeout(() => {\n                            $('.header').css({\n                                'visibility': 'hidden',\n                                'z-index': 10,\n                            });\n                        }, 300);\n                    }\n\n                    // тут записываем в куки, что корзина не пуста для дальнейшей реализации на PHP\n                }, 1000);\n\n            } else {\n                if (newCount <= 99) $cartCountText.text(newCount);\n                addToCartUpSell(upSell);\n            }\n        });\n    }\n\n    if (!App.isMobileDevice()) {\n        addToCart('.add_to_cart');\n    }\n\n    function addToCartUpSell(post_id) {\n        const $product = $('.popup-cart__products form');\n\n        const $bannerCart = $('.banner-cart');\n        $bannerCart.find('.banner-cart__up-sell').last().show();\n        $bannerCart.find(`#up-sell-${post_id}.banner-cart__up-sell`).hide();\n\n        // Получаем данные для указанного ID продукта из Woo\n        const data = {\n            1: {\n                id: 1,\n                img: 'assets/img/content/popup-cart-banner-2x.jpg',\n                title: 'Мышка-игрушка Mr. Pickles',\n                discount: '-30%',\n                price: '₴ 90',\n                price_discount: '₴ 125',\n            },\n            2: {\n                id: 2,\n                img: 'assets/img/content/main-card-about-2x.jpg',\n                title: 'Домик для кота Mr. Whiskers',\n                discount: '-20%',\n                price: '₴ 150',\n                price_discount: '₴ 200',\n            }\n        };\n\n        if (!data[post_id]) {\n            console.log(`Товар с ID ${post_id} не найден.`);\n            return;\n        }\n\n        const item = data[post_id];\n\n        // Шаблон товара со скидкой\n        const upSellHtml = `\n            <div class=\"popup-cart__product popup-cart__up-sell\">\n                <div class=\"popup-cart__item\">\n                    <div class=\"popup-cart__item--photo\">\n                        <img src=\"${item.img}\" alt=\"${item.title}\">\n                    </div>\n                </div>\n                <div class=\"popup-cart__item\">\n                    <div class=\"popup-cart__title\">\n                        <h4 class=\"body-s-reg\">${item.title}</h4>\n                    </div>\n                    <div class=\"popup-cart__details\">\n                        <div class=\"popup-cart__calc\">\n                            <span class=\"tag tag--discount\">${item.discount}</span>\n                        </div>\n                        <div class=\"popup-cart__price\">\n                            <s class=\"banner-cart__discount\">${item.price_discount}</s>\n                            <p class=\"body-s-sb\">${item.price}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `;\n\n        const $productFind = $product.find('.popup-cart__product');\n\n        if ($productFind.length === 0) {\n            $product.prepend(upSellHtml);\n        } else {\n            const $productLast = $productFind.last();\n            $productLast.after(upSellHtml);\n        }\n\n        responsiveCart($product);\n    }\n\n    function initQuantityInput($container) {\n        $container.find('.popup-cart__calc').each(function() {\n            const $calc = $(this);\n\n            $calc.on('click touch', '.minus', function() {\n                const $input = $(this).siblings('.quantity');\n                let currentValue = parseInt($input.val(), 10);\n\n                if (currentValue > 1) {\n                    $input.val(currentValue - 1);\n                }\n            });\n\n            $calc.on('click touch', '.plus', function() {\n                const $input = $(this).siblings('.quantity');\n                let currentValue = parseInt($input.val(), 10);\n                $input.val(currentValue + 1);\n            });\n\n            $calc.on('input', '.quantity', function() {\n                let currentValue = $(this).val();\n                if (!/^\\d+$/.test(currentValue) || parseInt(currentValue, 10) < 1) {\n                    $(this).val(1);\n                }\n            });\n        });\n    }\n\n    function responsiveCart($product, lengths = 3) {\n        if ($product.find('.popup-cart__product').length > lengths) {\n            $('.popup-cart').css('margin-bottom', '155px');\n            $('.banner-cart').css('margin', '20px 0');\n            $product.find('.popup-cart__totals.responsive').addClass('popup-cart__responsive');\n            $product.find('.banner-cart__up-sell.responsive').addClass('banner-cart__responsive');\n        }\n    }\n\n    /**\n     * Pause all other videos\n     *\n     * @param videoContainer\n     */\n    function pauseOtherVideos(videoContainer) {\n        const $videoContainer = $(videoContainer).find('video');\n        $videoContainer.each(function () {\n            this.pause();\n        });\n    }\n\n    function playVideo(videoContainer) {\n        const $videoContainer = $(videoContainer);\n        const $video = $videoContainer.find('video');\n        const $button = $videoContainer.find('.video-block__button--mp4');\n        const $useIco = $button.find('.ico-video-button > use');\n\n        $button.on('click', function () {\n\n            $('.video-block__source video').each(function () {\n                if (this !== $video[0]) {\n                    this.pause();\n                    $(this).closest('.video-block__source')\n                        .find('.ico-video-button > use')\n                        .attr('href', 'assets/img/sprite.svg#ico-play');\n                }\n            });\n\n            if ($video[0].paused) {\n                $video[0].play();\n                if ( $video.hasClass('cover') ) {\n                    $video.css('object-fit', 'cover');\n                }\n                $useIco.attr('href', 'assets/img/sprite.svg#ico-pause');\n            } else {\n                $video[0].pause();\n                $useIco.attr('href', 'assets/img/sprite.svg#ico-play');\n            }\n        });\n    }\n\n    function playVideoThank(videoContainer, button, text = null) {\n        const $videoContainer = $(videoContainer);\n        const $video = $videoContainer.find('video');\n        const $button = $videoContainer.find(button);\n        const $text = $videoContainer.find(text);\n\n        $video.on('pause', function () {\n            $button.show();\n            $button.css('opacity', '1');\n        });\n\n        $button.on('click', function (e) {\n            if ($video[0].paused) {\n                $video[0].play();\n                $button.css('opacity', '.5');\n                $text.hide();\n\n            } else {\n                $video[0].pause();\n                $button.css('opacity', '1');\n                $text.show();\n            }\n        });\n\n        $video.on('click', function () {\n            if (this.played) {\n                this.pause();\n                $button.css('opacity', '1');\n                $text.show();\n            }\n        });\n\n        $(document).on('keyup', function (e) {\n            if (e.key === 'Escape' || e.keyCode === 27) {\n                if ($video[0].played) {\n                    $video[0].pause();\n                    $button.show();\n                    $text.show();\n                    $button.css('opacity', '1');\n                }\n            }\n        });\n    }\n\n    function initializeAccordion(button, content, item) {\n        $(button).on('click', function(e) {\n            e.preventDefault();\n\n            const $accordionItem = $(this).closest(item);\n            const $visible = $accordionItem.find(content);\n\n            if (!$accordionItem.hasClass('active')) {\n                $accordionItem.siblings().removeClass('active').find(content).slideUp();\n                $accordionItem.addClass('active');\n                $visible.stop(true, true).slideDown();\n            } else {\n                $accordionItem.removeClass('active');\n                $visible.stop(true, true).slideUp();\n            }\n        });\n    }\n\n    /**\n     * Адаптивное меню с прокруткой\n     */\n    function modelsMenu($selector) {\n        const $items = $selector.find('a');\n\n        function centerActiveItem($item) {\n            const menuWidth = $selector.outerWidth();\n            const menuScrollLeft = $selector.scrollLeft();\n            const itemOffsetLeft = $item.offset().left;\n            const menuOffsetLeft = $selector.offset().left;\n            const itemLeft = itemOffsetLeft - menuOffsetLeft;\n            const itemWidth = $item.outerWidth();\n            const scrollTo = menuScrollLeft + itemLeft - (menuWidth / 2) + (itemWidth / 2);\n            $selector.animate({ scrollLeft: scrollTo }, 300);\n        }\n\n        $items.on('click touch', function () {\n            const $clickedItem = $(this);\n            $items.removeClass('active');\n            $clickedItem.addClass('active');\n            centerActiveItem($clickedItem);\n        });\n\n        // Установить начальный активный элемент, если он есть, в центр\n        const $initialActive = $items;\n        if ($initialActive.length) {\n            centerActiveItem($initialActive);\n        }\n    }\n\n    function addClassOnScroll(selector, threshold, className) {\n        const $targetBlock = $(selector);\n\n        function handleScroll() {\n            if ($(window).scrollTop() >= threshold) {\n                if (!$targetBlock.hasClass(className)) {\n                    $targetBlock.addClass(className); // Добавляем класс\n                }\n            } else {\n                $targetBlock.removeClass(className); // Убираем класс\n            }\n        }\n\n        $(window).on('scroll', handleScroll);\n    }\n\n    /**\n     * Preloads all specified media elements (images or videos) within a hidden container.\n     * Ensures that when the container is displayed, the media is already loaded,\n     * improving user experience by eliminating loading delays.\n     *\n     * @param {string} containerSelector - A jQuery selector string specifying the hidden container\n     *                                     where the media elements are located.\n     * @param {string} mediaType - The type of media to preload.\n     *                             Possible values: 'img' for images, 'video' for videos.\n     *\n     * @example:\n     * $(document).ready(function () {\n     *     preloadHiddenMedia('.container', 'img');   // Preloads images\n     *     preloadHiddenMedia('.container', 'video'); // Preloads videos\n     * });\n     */\n    function preloadHiddenMedia(containerSelector, mediaType) {\n        if (mediaType !== 'img' && mediaType !== 'video') {\n            console.log('Invalid mediaType. Use \"img\" or \"video\".');\n            return;\n        }\n\n        $(containerSelector).find(mediaType).each(function () {\n            if (mediaType === 'img') {\n                const img = new Image();\n                img.src = $(this).attr('src');  // Preload image by setting src\n            } else if (mediaType === 'video') {\n                this.load();  // Preload video by invoking the load() method\n            }\n        });\n    }\n\n    function chooseProductScroll() {\n        App.$body.on('click touch', '.choose-product', () => {\n            if (App.$modelsMenu.length > 0) {\n                if (App.isMobileDevice()) {\n                    App.scrollTopBody(App.$productsMobile);\n                } else {\n                    App.scrollTopBody(App.$modelsMenu);\n                }\n            }\n        });\n    }\n\n    function toggleDropdownMenu(open) {\n        $(open).on('click touch', function () {\n            const $this = $(this);\n            const $item = $this.next('.menu-dropdown__item');\n            const $svg = $this.find('svg');\n            $item.slideToggle(300);\n            $svg.toggleClass('rotated');\n        });\n    }\n\n    $(window).on('load scroll', waitAnimation);\n\n    $(function() {\n\n        if (App.isMobileDevice()) {\n            toggleDropdownMenu('.menu-dropdown > .menu-dropdown__open');\n            addClassOnScroll('.product-card__form .product-card__buttons--clone', 200, 'fixed');\n\n            // Манипуляция с адаптивными кнопками\n            $('.product-card__form .product-card__buttons').each(function() {\n                const content = $(this).html();\n                $(this).remove();\n                $('.product-card__form .product-card__buttons--clone').html(content);\n            });\n\n            addToCart('.add_to_cart');\n\n            productsSlider('.products-mobile__slider.swiper-container');\n            productsSlider('.in-box .swiper-container');\n\n            if (App.$body.hasClass('lend-series-pro')) {\n                App.headerMobileClick('.header-mobile__arrow');\n                $(window).on('scroll', App.updateHeaderOnScroll);\n            }\n        }\n\n        $('.video-block__source').each(function () {\n            playVideo(this);\n        });\n\n        modelsMenu(App.$modelsMenu);\n        modelsMenu($('.blog-page__categories'));\n        playVideoThank('.thank-page__video', '.thank-page__button', '.thank-page__play--text');\n        initializeAccordion('.accordion-open', '.accordion__content', '.accordion__item');\n\n        addClassOnScroll('.section--reviews > .section__wrapper', 120, 'fixed');\n\n        // WP загружать только на нужных страницах\n        preloadHiddenMedia('.dialogs', 'img');\n\n        chooseProductScroll();\n\n        if ( App.$modelsMenu.length > 0 ) {\n            const $activeItem = App.$modelsMenu.find('a' + '.active');\n            if($activeItem.attr('href') === App.winLocHash || '#choose-product' === App.winLocHash) {\n                if (App.isMobileDevice()) {\n                    App.scrollTopBody(App.$productsMobile);\n                } else {\n                    App.scrollTopBody(App.$modelsMenu);\n                }\n            }\n        }\n    });\n\n})(jQuery);"],"names":["$","window","App","isScrollTopBody","winLocHash","location","hash","$body","$htmlBody","$modelsMenu","$productsMobile","$headerMobile","$currentProduct","$nextProduct","scrollTopBody","$element","indent","duration","length","animate","scrollTop","offset","top","initFileUpload","triggerSelector","inputSelector","textSelector","maxLength","on","trigger","let","fileName","this","files","name","extension","start","end","extIndex","lastIndexOf","slice","visibleLength","Math","ceil","floor","text","lazyLoadImages","each","src","srcset","$img","isInViewportImg","data","attr","hide","fadeIn","isMobileDevice","maxWidth","innerWidth","headerMobileClick","el","e","preventDefault","first","updateHeaderOnScroll","newTitle","newProduct","newAnchor","$headerTitle","find","$headerArrow","$headerButton","$items","isCurrentProductFound","index","$item","itemTop","itemBottom","outerHeight","eq","is","css","fadeOut","fn","elementTop","elementBottom","viewportTop","viewportBottom","height","percentOfViewport","viewportHeight","ELtop_to_VPtop","ELbottom_to_VPtop","ELtop_to_VPbottom","ELbottom_to_VPbottom","isInViewport","p","toggleClass","slideToggle","navigationWrapper","removeAttr","padding-bottom","mask","previewProductCard","Swiper","direction","slidesPerView","spaceBetween","productsSlider","swiperContainer","document","querySelectorAll","forEach","container","autoHeight","dataset","centeredSlides","slideToClickedSlide","pagination","nextElementSibling","clickable","thumbs","swiper","navigation","nextEl","prevEl","breakpoints","319","slidesOffsetBefore","slidesOffsetAfter","769","autoplay","delay","$productSlider","PRODUCT_CLASS_SLIDER","threshold","speed","initialSlide","parseInt","loop","observer","observeParents","observeSlideChildren","hashNavigation","replaceState","watchState","init","slideChange","removeClass","realIndex","addClass","event","category","$dialogs","$categoryDialogs","$flexPopup","popupCategory","localStorage","setItem","overflow-y","show","opacity","product","previewPopUpGallery","320","480","640","pauseOtherVideos","console","log","$popupToOpen","popupId","bodyScroll","removeClassPopup","className","match","join","$popupActive","right","getItem","bottom","key","keyCode","DROPDOWN_CLASS","addToCart","btnSelector","$button","upSell","$productImage","$cartHeader","$cartIcon","$cartCount","$cartCountText","newCount","post_id","$product","$bannerCart","last","1","id","img","title","discount","price","price_discount","2","upSellHtml","item","$productFind","prepend","after","responsiveCart","hasClass","visibility","z-index","imageWidth","prop","imageHeight","$flyImage","clone","appendTo","buttonOffset","buttonCenterX","left","outerWidth","buttonCenterY","cartOffset","cartCenterX","width","cartCenterY","scale","display","position","zIndex","pointerEvents","transition","transformOrigin","transform","tag_text","tag_class","3","4","5","productHtml","$productFirst","val","$calc","$input","siblings","currentValue","test","setTimeout","remove","lengths","videoContainer","pause","modelsMenu","$selector","centerActiveItem","menuWidth","menuScrollLeft","scrollLeft","itemLeft","itemWidth","$clickedItem","$initialActive","addClassOnScroll","selector","$targetBlock","stopPropagation","$filter","closest","$list","activeFilters","map","get","filteredItems","itemFilters","split","some","filter","includes","push","$visible","$card","$images","optionValue","$optionContainer","selectors","btnSelectors","next","target","viewGridSwitcher","$btnSelector","view","$wrapper","content","mediaType","$this","$svg","html","playVideo","$video","$videoContainer","$useIco","paused","play","playVideoThank","button","$text","played","$accordionItem","stop","slideUp","slideDown","containerSelector","Image","load","jQuery"],"mappings":"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"}