{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["// lazyload for images\r\nfunction img_loader() {\r\n    setTimeout(function(){\r\n        $('body').find('img[data-src]').each(function(){\r\n            var src = $(this).attr('data-src');\r\n            var srcset = $(this).attr('data-srcset');\r\n            var classes = $(this).attr('class');\r\n            var alt = $(this).attr('alt');\r\n            var title = $(this).attr('title');\r\n            if (src) {\r\n              var img = new Image();\r\n              $(img).hide();\r\n              $(img).on('load', function(){\r\n                $(this).fadeIn(400);\r\n                setTimeout(function(){\r\n                    $(img).addClass('transition');\r\n                },400);\r\n              });\r\n              $(img).attr('srcset', srcset );  \r\n              $(img).attr('src', src );\r\n              $(img).attr('alt', alt);\r\n              $(img).attr('title', title);\r\n              $(img).addClass(classes);\r\n              $(this).replaceWith(img);\r\n            }\r\n        });\r\n    }, 150);\r\n}\r\n\r\n\r\n// calc block position in viewport\r\n$.fn.percentOfViewport = function() {\r\n    var viewportHeight = $(window).height();\r\n\r\n    var elementTop = $(this).offset().top;\r\n    var elementBottom = elementTop + $(this).height();\r\n\r\n    \r\n    var viewportTop = $(window).scrollTop();\r\n    var viewportBottom = viewportTop + viewportHeight;\r\n    var viewportCenter = viewportTop + (viewportHeight/2);\r\n\r\n    var top_to_top_percent = (elementTop - viewportTop) / viewportHeight * 100;\r\n    var bottom_to_top_percent = (elementBottom - viewportTop) / viewportHeight * 100;\r\n\r\n    var top_to_bottom_percent = (viewportBottom - elementTop) / viewportHeight * 100;\r\n    var bottom_to_bottom_percent = (viewportBottom - elementBottom) / viewportHeight * 100;\r\n\r\n    return {\r\n        ELtop_to_VPtop:     top_to_top_percent,\r\n        ELbottom_to_VPtop:  bottom_to_top_percent,\r\n        ELtop_to_VPbottom:  top_to_bottom_percent,\r\n        ELbottom_to_VPbottom:  bottom_to_bottom_percent,\r\n        viewportHeight: viewportHeight\r\n    };\r\n};\r\n\r\n\r\n// check is block is in viewport\r\n$.fn.isInViewport = function() {\r\n    var p = $(this).percentOfViewport();\r\n\r\n    return  p.ELtop_to_VPtop < 100 && \r\n            p.ELbottom_to_VPtop > 0;\r\n};\r\n\r\n$(function() {\r\n\r\n    // sandwich menu toggle\r\n    $('.sandwich').on('click touch', function () {\r\n        $(this).toggleClass('active');\r\n        $('.header__navigation').slideToggle();\r\n\r\n        let navigationWrapper = $(\".header__wrapper--navigation\");\r\n        if (navigationWrapper.css(\"padding-bottom\") === \"40px\") {\r\n            navigationWrapper.removeAttr(\"style\");\r\n        } else {\r\n            navigationWrapper.css({\r\n                \"padding-bottom\": \"40px\",\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    $('.inp-phone').mask('+38 (999) 999-99-99');\r\n\r\n    // smooth scrolling to anchor\r\n    $('a.smooth, nav > ul li a').on('click touch', function(){\r\n        var id = $(this).attr('href');\r\n        var loc_url = window.location.pathname;\r\n        var pos = ($(id).offset().top) - $('header').outerHeight() - 49;\r\n        $('html, body').animate({scrollTop: pos }, 1000);\r\n        return false;\r\n    });\r\n\r\n    // video play on click\r\n    $('.container').on('click touch', '.js-play-video', function(){\r\n        var video = $(this).siblings('video')[0];\r\n        video.play();\r\n        video.controls=\"controls\";\r\n        $(this).hide();\r\n    });\r\n\r\n    // opening popups\r\n    $('body').on('click touch', '.open-dialog, .open-popup, .open-form, .open-modal, .open-dialog a, .open-popup a, .open-form a, .open-modal a', function(){\r\n        var category = $(this).attr('href');\r\n        var categoryForm = $('.dialogs ' + category);\r\n        $('.dialogs .popup').removeClass('active').hide();\r\n        categoryForm.show();\r\n        $('.dialogs').show();\r\n        $('.dialogs').animate({'opacity':1}, 200, function() {\r\n            categoryForm.addClass('active');\r\n        });\r\n        $('body').css({'overflow-y':'hidden'});\r\n        return false;\r\n    });\r\n\r\n    // closing popups\r\n    $('.dialogs').on('click touch', '.close, .close-bg', function() {\r\n        $('.dialogs .popup').removeClass('active');\r\n        $('.dialogs').animate({'opacity':0}, 200, function() {\r\n            $('.dialogs').hide();\r\n            $('.dialogs .popup').hide();\r\n            $('.dialogs .thanks-popup').hide();\r\n        });\r\n        $('body').css({'overflow-y':'auto'});\r\n    });\r\n    $(document).keyup(function(e) {\r\n      if (e.keyCode === 27) $('.dialogs .popup.active .close').click(); // esc\r\n    });\r\n\r\n    const DROPDOWN_CLASS = '.dropdown';\r\n\r\n    function initDropdownToggle(btnSelectors) {\r\n        const selectors = btnSelectors.join(',');\r\n        $(document).on('click touch', selectors, function (e) {\r\n            e.stopPropagation();\r\n            const $filter = $(this).next(DROPDOWN_CLASS);\r\n            if ($filter.hasClass('active')) {\r\n                $filter.removeClass('active');\r\n                return;\r\n            }\r\n            $(DROPDOWN_CLASS).removeClass('active');\r\n            $filter.addClass('active');\r\n        });\r\n\r\n        $(document).on('click touch', function (e) {\r\n            if (!$(e.target).closest(DROPDOWN_CLASS).length) {\r\n                $(DROPDOWN_CLASS).removeClass('active');\r\n            }\r\n        });\r\n    }\r\n\r\n    initDropdownToggle([\r\n        '.dropdown-language',\r\n        '.dropdown-filter',\r\n        '.dropdown-category'\r\n    ]);\r\n\r\n\r\n    $(DROPDOWN_CLASS).on('click touch', DROPDOWN_CLASS + '__item', function (e) {\r\n        $(this).toggleClass('active').trigger('filtered');\r\n        e.stopPropagation();\r\n    });\r\n\r\n    $(DROPDOWN_CLASS).on('filtered', DROPDOWN_CLASS + '__item', function () {\r\n        const $filter = $(this).closest(DROPDOWN_CLASS);\r\n        const $list = $filter.closest('section').find('.filtered-list');\r\n\r\n        const activeFilters = $filter.find(DROPDOWN_CLASS + '__item.active').map(function () {\r\n            return $(this).data('filter');\r\n        }).get();\r\n\r\n        const $items = $list.find(DROPDOWN_CLASS + '__item');\r\n        $items.hide().removeClass('left right');\r\n\r\n        if (activeFilters.length > 0) {\r\n            let index = 0;\r\n            activeFilters.forEach(filter => {\r\n                $items.filter(`[data-filter*=\"${filter}\"]`).each(function () {\r\n                    $(this).show().addClass(index % 2 === 0 ? 'left' : 'right');\r\n                    index++;\r\n                });\r\n            });\r\n        } else {\r\n            $items.show();\r\n        }\r\n    });\r\n\r\n    // all sliders\r\n    // const swiper = new Swiper('.swiper', {\r\n    //     slidesPerView: 'auto',\r\n    //     speed: 400,\r\n    //     spaceBetween: 20,\r\n    //     navigation: {\r\n    //         nextEl: '.slider-next',\r\n    //         prevEl: '.slider-prev',\r\n    //     },\r\n    //     pagination: {\r\n    //         el: '.slider-pagination',\r\n    //         type: 'bullets',\r\n    //     },\r\n    // });\r\n\r\n});\r\n\r\n\r\n$(window).on('load scroll', function(){\r\n    var scrollTop = $(window).scrollTop();\r\n\r\n\r\n    // start animations when it is in viewport but pause when out of it\r\n    // .out-of-viewport doing nothing if animation item can be runned only once\r\n    $('.js-wait-animation').each(function(){\r\n        if ( $(this).isInViewport() ) {\r\n            $(this).addClass('animate')\r\n                        .removeClass('out-of-viewport');\r\n        } else {\r\n            $(this).addClass('out-of-viewport');\r\n        }\r\n    });\r\n});\r\n\r\n\r\n$(window).on('load', function(){\r\n\r\n    img_loader();\r\n    \r\n});"],"names":["img_loader","setTimeout","$","find","each","img","src","this","attr","srcset","classes","alt","title","Image","hide","on","fadeIn","addClass","replaceWith","fn","percentOfViewport","viewportHeight","window","height","elementTop","offset","top","elementBottom","viewportTop","scrollTop","viewportBottom","ELtop_to_VPtop","ELbottom_to_VPtop","ELtop_to_VPbottom","ELbottom_to_VPbottom","isInViewport","p","toggleClass","slideToggle","let","navigationWrapper","css","removeAttr","padding-bottom","mask","id","pos","location","pathname","outerHeight","animate","video","siblings","play","controls","category","categoryForm","removeClass","show","opacity","overflow-y","document","keyup","e","keyCode","click","DROPDOWN_CLASS","btnSelectors","selectors","join","stopPropagation","$filter","next","hasClass","target","closest","length","trigger","$list","activeFilters","map","data","get","$items","index","forEach","filter"],"mappings":"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"}