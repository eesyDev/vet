{"version":3,"file":"main.js","sources":["main.js"],"sourcesContent":["(function ($) {\r\n    window.App = window.App || {};\r\n\r\n    App.isScrollTopBody  = true;\r\n    App.winLocHash       = window.location.hash;\r\n    App.$body            = $('body');\r\n    App.$htmlBody        = $('html, body');\r\n    App.$modelsMenu      = $('.slider-menu .models-menu');\r\n    App.$productsMobile  = $('.products-mobile');\r\n\r\n    /**\r\n     * Animate scroll top to element\r\n     *\r\n     * @param {Object|string} $element jQuery object or selector string.\r\n     * @param {Number} [indent=54] indent to the desired element in px.\r\n     * @param {Number} [duration=600] animation time in milliseconds.\r\n     *\r\n     * @example\r\n     * // Using a jQuery object\r\n     * App.scrollTopBody($('.element'));\r\n     *\r\n     * @example\r\n     * // Using a selector string\r\n     * App.scrollTopBody('.element');\r\n     *\r\n     * @example\r\n     * // Using a custom indent and duration\r\n     * App.scrollTopBody('.element', 80, 1000);\r\n     */\r\n    App.scrollTopBody = function($element, indent = 54, duration = 600) {\r\n        if (typeof $element === 'string') {\r\n            $element = $($element);\r\n        }\r\n\r\n        if ($element.length) {\r\n            App.$htmlBody.animate({\r\n                scrollTop: $element.offset().top - indent\r\n            }, duration);\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Инициализирует функциональность загрузки файла с возможностью выбора файла по клику на указанный элемент.\r\n     * Если длина имени выбранного файла превышает maxLength, сохраняются начало и конец строки, а середина заменяется на '...'.\r\n     *\r\n     * @param {string} triggerSelector - Селектор элемента, клик по которому вызывает выбор файла.\r\n     * @param {string} inputSelector - Селектор скрытого <input type=\"file\">.\r\n     * @param {string} textSelector - Селектор элемента, в который будет выводиться название выбранного файла.\r\n     * @param {number} [maxLength=20] - Максимальная длина текста для отображения имени файла. По умолчанию 20 символов.\r\n     */\r\n    App.initFileUpload = function(triggerSelector, inputSelector, textSelector, maxLength = 20) {\r\n        $(triggerSelector).on('click', function () {\r\n            $(inputSelector).trigger('click');\r\n        });\r\n\r\n        $(inputSelector).on('change', function () {\r\n            let fileName = this.files[0]?.name || 'Файл не обрано';\r\n\r\n            if (fileName.length > maxLength) {\r\n                const extIndex = fileName.lastIndexOf('.');\r\n                const extension = extIndex !== -1 ? fileName.slice(extIndex) : ''; // Расширение файла\r\n                const visibleLength = maxLength - extension.length - 3; // Учёт места под '...'\r\n\r\n                if (visibleLength > 0) {\r\n                    const start = fileName.slice(0, Math.ceil(visibleLength / 2)); // Начало имени\r\n                    const end = fileName.slice(-Math.floor(visibleLength / 2)); // Конец имени\r\n                    fileName = `${start}...${end}${extension}`;\r\n                }\r\n            }\r\n\r\n            $(textSelector).text(fileName);\r\n        });\r\n    }\r\n\r\n    // lazy load for images\r\n    App.lazyLoadImages = function () {\r\n        $('img[data-src]').each(function () {\r\n            let $img = $(this);\r\n            if ($img.isInViewportImg() && !$img.data('loaded')) {\r\n                let src = $img.attr('data-src');\r\n                let srcset = $img.attr('data-srcset');\r\n\r\n                if (src) $img.attr('src', src);\r\n                if (srcset) $img.attr('srcset', srcset);\r\n                $img.data('loaded', true);\r\n                $img.hide().fadeIn(400);\r\n            }\r\n        });\r\n    }\r\n\r\n    App.isMobileDevice = function(url) {\r\n        return /Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent);\r\n    }\r\n\r\n    $.fn.isInViewportImg = function () {\r\n        let elementTop = $(this).offset().top;\r\n        let elementBottom = elementTop + $(this).outerHeight();\r\n        let viewportTop = $(window).scrollTop();\r\n        let viewportBottom = viewportTop + $(window).height();\r\n\r\n        return elementBottom > viewportTop && elementTop < viewportBottom;\r\n    };\r\n\r\n    $(window).on('load scroll resize', App.lazyLoadImages);\r\n\r\n    // calc block position in viewport\r\n    $.fn.percentOfViewport = function() {\r\n        let viewportHeight = $(window).height();\r\n\r\n        let elementTop = $(this).offset().top;\r\n        let elementBottom = elementTop + $(this).height();\r\n\r\n\r\n        let viewportTop = $(window).scrollTop();\r\n        let viewportBottom = viewportTop + viewportHeight;\r\n        //let viewportCenter = viewportTop + (viewportHeight/2);\r\n\r\n        let top_to_top_percent = (elementTop - viewportTop) / viewportHeight * 100;\r\n        let bottom_to_top_percent = (elementBottom - viewportTop) / viewportHeight * 100;\r\n\r\n        let top_to_bottom_percent = (viewportBottom - elementTop) / viewportHeight * 100;\r\n        let bottom_to_bottom_percent = (viewportBottom - elementBottom) / viewportHeight * 100;\r\n\r\n        return {\r\n            ELtop_to_VPtop:     top_to_top_percent,\r\n            ELbottom_to_VPtop:  bottom_to_top_percent,\r\n            ELtop_to_VPbottom:  top_to_bottom_percent,\r\n            ELbottom_to_VPbottom:  bottom_to_bottom_percent,\r\n            viewportHeight: viewportHeight\r\n        };\r\n    };\r\n\r\n    // check is block is in viewport\r\n    $.fn.isInViewport = function() {\r\n        let p = $(this).percentOfViewport();\r\n\r\n        return  p.ELtop_to_VPtop < 100 &&\r\n            p.ELbottom_to_VPtop > 0;\r\n    };\r\n\r\n    // sandwich menu toggle\r\n    $('.sandwich').on('click touch', function () {\r\n        $(this).toggleClass('active');\r\n        $('.header__navigation').slideToggle();\r\n\r\n        let navigationWrapper = $(\".header__wrapper--navigation\");\r\n        if (navigationWrapper.css(\"padding-bottom\") === \"40px\") {\r\n            navigationWrapper.removeAttr(\"style\");\r\n        } else {\r\n            navigationWrapper.css({\r\n                \"padding-bottom\": \"40px\",\r\n            });\r\n        }\r\n\r\n    });\r\n\r\n    $('.inp-phone').mask('+38 (999) 999-99-99');\r\n\r\n    /**\r\n     * @typedef {import('node_modules/swiper').Swiper} Swiper\r\n     */\r\n    const previewProductCard = new Swiper(\".gallery > .gallery__preview.swiper-container\", {\r\n        direction: 'vertical',\r\n        slidesPerView: 'auto',\r\n        spaceBetween: 8,\r\n    });\r\n\r\n    const mainProductCard = new Swiper(\".gallery > .gallery__media.swiper-container\", {\r\n        spaceBetween: 0,\r\n        thumbs: {\r\n            swiper: previewProductCard,\r\n        },\r\n        pagination: {\r\n            el: '.product-card__wrapper > .flex > .swiper-pagination-clickable',\r\n            clickable: true,\r\n        }\r\n    });\r\n\r\n    const offersCardSlider = new Swiper(\".offers-card__slider.swiper-container\", {\r\n        slidesPerView: 'auto',\r\n        direction: 'horizontal',\r\n        spaceBetween: 6,\r\n        navigation: {\r\n            nextEl: \".offers-card__navigation .slider-nav__next\",\r\n            prevEl: \".offers-card__navigation .slider-nav__prev\",\r\n        },\r\n        breakpoints: {\r\n            320: {\r\n                slidesOffsetBefore: 20,\r\n                slidesOffsetAfter: 20,\r\n            },\r\n            480: {\r\n                slidesOffsetBefore: 20,\r\n                slidesOffsetAfter: 20,\r\n            },\r\n            640: {\r\n                slidesOffsetBefore: 240,\r\n                slidesOffsetAfter: 240,\r\n            }\r\n        }\r\n    });\r\n\r\n    const benefitsCardSlider = new Swiper(\".benefits-card__slider.swiper-container\", {\r\n        slidesPerView: 'auto',\r\n        direction: 'horizontal',\r\n        spaceBetween: 40,\r\n        navigation: {\r\n            nextEl: \".benefits-card__navigation .slider-nav__next\",\r\n            prevEl: \".benefits-card__navigation .slider-nav__prev\",\r\n        },\r\n        breakpoints: {\r\n            320: {\r\n                spaceBetween: 20,\r\n                slidesOffsetBefore: 20,\r\n                slidesOffsetAfter: 20,\r\n            },\r\n            480: {\r\n                spaceBetween: 20,\r\n                slidesOffsetBefore: 20,\r\n                slidesOffsetAfter: 20,\r\n            },\r\n            640: {\r\n                spaceBetween: 40,\r\n                slidesOffsetBefore: 240, // смещение слева в px\r\n                slidesOffsetAfter: 240, // смещение справа в px\r\n            }\r\n        }\r\n    });\r\n\r\n    const reviewsSlider = new Swiper('.reviews > .swiper-container', {\r\n        pagination: {\r\n            el: '.reviews > .swiper-pagination-clickable',\r\n            clickable: true,\r\n        },\r\n        breakpoints: {\r\n            320: {\r\n                slidesPerView: 'auto',\r\n                spaceBetween: 20,\r\n                slidesOffsetBefore: 20,\r\n                slidesOffsetAfter: 20,\r\n            },\r\n            480: {\r\n                slidesPerView: 'auto',\r\n                spaceBetween: 20,\r\n                slidesOffsetBefore: 20,\r\n                slidesOffsetAfter: 20,\r\n            },\r\n            640: {\r\n                slidesPerView: 3,\r\n                spaceBetween: 30,\r\n            }\r\n        }\r\n    });\r\n\r\n    const articleRelatedSlider = new Swiper('.article-related .swiper-container', {\r\n        autoHeight: false,\r\n        autoplay: {\r\n            delay: 2000,\r\n        },\r\n        breakpoints: {\r\n            320: {\r\n                slidesPerView: 'auto',\r\n                spaceBetween: 20,\r\n                slidesOffsetBefore: 20,\r\n                slidesOffsetAfter: 20,\r\n            },\r\n            480: {\r\n                slidesPerView: 'auto',\r\n                spaceBetween: 20,\r\n                slidesOffsetBefore: 20,\r\n                slidesOffsetAfter: 20,\r\n            },\r\n            640: {\r\n                slidesPerView: 3,\r\n                spaceBetween: 30,\r\n            }\r\n        }\r\n    });\r\n\r\n    function productsSlider(swiperContainer) {\r\n        const swiper = document.querySelectorAll(swiperContainer);\r\n        swiper.forEach((container) => {\r\n            new Swiper(container, {\r\n                slidesPerView: 'auto',\r\n                autoHeight: container.dataset.autoHeight === \"true\" || false, // default false\r\n                spaceBetween: 20,\r\n                centeredSlides: true,\r\n                slideToClickedSlide: true,\r\n                pagination: {\r\n                    el: container.nextElementSibling,\r\n                    clickable: true,\r\n                },\r\n            });\r\n        });\r\n    }\r\n\r\n    function popupGallery(product) {\r\n\r\n        const previewPopUpGallery = new Swiper(`.popup-gallery[data-gallery=\"product-${product}\"] > .popup-gallery__preview`, {\r\n            slidesPerView: 'auto',\r\n            spaceBetween: 8,\r\n            threshold: 8,\r\n            breakpoints: {\r\n                320: {\r\n                    direction: 'horizontal',\r\n                    slidesOffsetBefore: 20,\r\n                    slidesOffsetAfter: 20,\r\n                },\r\n                480: {\r\n                    direction: 'horizontal',\r\n                    slidesOffsetBefore: 20,\r\n                    slidesOffsetAfter: 20,\r\n                },\r\n                640: {\r\n                    direction: 'vertical',\r\n                }\r\n            }\r\n        });\r\n\r\n        const mainPopUpGallery = new Swiper(`.popup-gallery[data-gallery=\"product-${product}\"] > .popup-gallery__media`, {\r\n            spaceBetween: 0,\r\n            thumbs: {\r\n                swiper: previewPopUpGallery,\r\n            }\r\n        });\r\n    }\r\n\r\n    const PRODUCT_CLASS_SLIDER = '.product-slider';\r\n    const $productSlider = $(PRODUCT_CLASS_SLIDER);\r\n\r\n    if ($productSlider.length > 0) {\r\n\r\n        const prodSlider = new Swiper(PRODUCT_CLASS_SLIDER, {\r\n            slidesPerView: 'auto',\r\n            spaceBetween: 120,\r\n            threshold: 20,\r\n            speed: 800,\r\n            initialSlide: (parseInt($productSlider.data('initial-slide')) || 1) - 1, // активный слайд\r\n            loop: false,\r\n            observer: true,\r\n            autoHeight: false,\r\n            observeParents: true,\r\n            slideToClickedSlide: true,\r\n            observeSlideChildren: true,\r\n            centeredSlides: true,\r\n            hashNavigation: {\r\n                replaceState: true,\r\n                watchState: true,\r\n            },\r\n            on: {\r\n\r\n                init: function () {\r\n                    App.isScrollTopBody = false;\r\n                },\r\n\r\n                slideChange: function () {\r\n                    const $item = App.$modelsMenu.find('a');\r\n                    $item.removeClass('active');\r\n                    $item.eq(this.realIndex).addClass('active').trigger('classChange');\r\n\r\n                    if (!App.isScrollTopBody) {\r\n                        App.scrollTopBody(App.$modelsMenu);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    // opening popups\r\n    App.$body.on('click touch', '.open-dialog, .open-popup, .open-form, .open-modal', function (event) {\r\n        event.preventDefault();\r\n\r\n        const category = $(this).attr('href');\r\n        const $dialogs = $('.dialogs');\r\n        const $categoryDialogs = $dialogs.find(category);\r\n        const $flexPopup = $dialogs.find('.flex-popup');\r\n        const popupCategory = category.slice(1);\r\n\r\n        if (popupCategory !== 'policy') {\r\n            localStorage.setItem('popup', popupCategory);\r\n        }\r\n\r\n        if (popupCategory === 'list') {\r\n            App.$body.css({ 'overflow-y': 'hidden' });\r\n            $dialogs.css({ 'overflow-y': 'hidden' });\r\n        }\r\n\r\n        if ( popupCategory === 'work-offer' || popupCategory === 'details' ) {\r\n            App.$body.css({ 'overflow-y': 'hidden' });\r\n            $dialogs.css({ 'overflow-y': 'auto' });\r\n        }\r\n\r\n        $dialogs.find('.popup').removeClass('active').hide();\r\n\r\n        if (!$categoryDialogs.length) {\r\n            console.log(`Попап с ID ${category} не найден.`);\r\n            return false;\r\n        }\r\n\r\n        $dialogs.find('.popup').removeClass('active').hide();\r\n        $categoryDialogs.show();\r\n        $dialogs.show();\r\n\r\n        $flexPopup.addClass('popup--' + popupCategory);\r\n        $dialogs.animate({ opacity: 1 }, 300, () => {\r\n            $categoryDialogs.addClass('active');\r\n            App.$body.css({ 'overflow-y': 'hidden' });\r\n        });\r\n\r\n        if (popupCategory === 'gallery') {\r\n            const product = $(this).attr('data-product');\r\n            $flexPopup.find(`.popup__content .popup-gallery`).hide();\r\n            const $productGallery = $flexPopup.find(`.popup__content .popup-gallery[data-gallery=\"product-${product}\"]`);\r\n            $productGallery.show();\r\n            popupGallery(product);\r\n        }\r\n\r\n        pauseOtherVideos('.swiper-slide');\r\n\r\n        return false;\r\n    });\r\n\r\n    // closing popups\r\n    $('.dialogs').on('click touch', '.close, .close-bg', function () {\r\n        const $dialogs = $('.dialogs');\r\n        const $flexPopup = $dialogs.find('.flex-popup');\r\n        const $activePopup = $dialogs.find('.popup.active');\r\n        const popupId = $activePopup.attr('id');\r\n\r\n        const bodyScroll = () => {\r\n            App.$body.css({ 'overflow-y': 'auto' });\r\n        };\r\n\r\n        const removeClassPopup = () => {\r\n            $flexPopup.removeClass(function (index, className) {\r\n                return (className.match(/popup--\\S+/g) || []).join(' ');\r\n            });\r\n        };\r\n\r\n        const $popupActive = $flexPopup.find('.popup.active');\r\n\r\n        if (popupId === 'cart') { // Корзина\r\n            $popupActive.animate({ right: '-100%', opacity: 0 }, 600, function () {\r\n                $dialogs.animate({ opacity: 0 }, 300, function () {\r\n                    $dialogs.find('.popup').removeClass('active').hide();\r\n                    $popupActive.removeAttr('style');\r\n                    $dialogs.hide();\r\n                    $dialogs.find('.thanks-popup').hide();\r\n                    removeClassPopup();\r\n                });\r\n                bodyScroll();\r\n            });\r\n\r\n        } else if (popupId === 'policy') { // Политика конфиденциальности\r\n\r\n            $popupActive.removeClass('active').hide();\r\n\r\n            let popupCategory = localStorage.getItem('popup');\r\n\r\n            // Открываем popup с соответствующим ID\r\n            const $popupToOpen = $('.dialogs #' + popupCategory);\r\n            if ($popupToOpen.length) {\r\n                $popupToOpen.addClass('active').show();\r\n                $dialogs.show();\r\n            } else {\r\n                console.log('Попап с ID ' + popupCategory + ' не найден.');\r\n            }\r\n\r\n        } else if (popupId === 'details') { // Детали преимуществ\r\n\r\n            $popupActive.animate({ top: '100%', opacity: 0 }, 600, function () {\r\n                $dialogs.animate({ opacity: 0 }, 400, function () {\r\n                    $dialogs.find('.popup').removeClass('active').hide();\r\n                    $popupActive.removeAttr('style');\r\n                    $dialogs.hide();\r\n                    removeClassPopup();\r\n                });\r\n                bodyScroll();\r\n            });\r\n\r\n        } else if (popupId === 'list') { // Список приютов\r\n\r\n            $popupActive.animate({ bottom: '-100%', opacity: 0 }, 600, function () {\r\n                $dialogs.animate({ opacity: 0 }, 300, function () {\r\n                    $dialogs.find('.popup').removeClass('active').hide();\r\n                    $popupActive.removeAttr('style');\r\n                    $dialogs.hide();\r\n                    removeClassPopup();\r\n                });\r\n                bodyScroll();\r\n            });\r\n\r\n        } else { // Остальные окна\r\n\r\n            $popupActive.removeClass('active').hide();\r\n            $dialogs.animate({ opacity: 0 }, 300, function () {\r\n                $dialogs.hide();\r\n                $dialogs.find('.thanks-popup').hide();\r\n                removeClassPopup();\r\n                bodyScroll();\r\n            });\r\n        }\r\n        pauseOtherVideos('.swiper-slide');\r\n    });\r\n\r\n    // closing popups pressing esc\r\n    $(document).on('keyup', function (e) {\r\n        if (e.key === 'Escape' || e.keyCode === 27) {\r\n            $('.dialogs .popup.active .close').trigger('click');\r\n            pauseOtherVideos('.swiper-slide');\r\n        }\r\n    });\r\n\r\n    const DROPDOWN_CLASS = '.dropdown';\r\n\r\n    function initDropdownToggle(btnSelectors) {\r\n        const selectors = btnSelectors.join(',');\r\n\r\n        $(document).on('click touch', selectors, function (e) {\r\n            const $filter = $(this).next(DROPDOWN_CLASS);\r\n            if ($filter.hasClass('active')) {\r\n                $filter.removeClass('active');\r\n                return;\r\n            }\r\n\r\n            $(DROPDOWN_CLASS).removeClass('active');\r\n            $filter.addClass('active');\r\n            e.stopPropagation();\r\n            return false;\r\n        });\r\n\r\n        $(document).on('click touch', function (e) {\r\n            if (!$(e.target).closest(DROPDOWN_CLASS).length) {\r\n                $(DROPDOWN_CLASS).removeClass('active');\r\n            }\r\n        });\r\n    }\r\n\r\n    $(DROPDOWN_CLASS).on('click touch', DROPDOWN_CLASS + '__item', function (e) {\r\n        $(this).toggleClass('active').trigger('filtered');\r\n        e.stopPropagation();\r\n    });\r\n\r\n\r\n    $(DROPDOWN_CLASS).on('filtered', DROPDOWN_CLASS + '__item', function () {\r\n        const $filter = $(this).closest(DROPDOWN_CLASS);\r\n        const $list = $('.filtered-list');\r\n\r\n        const activeFilters = $filter.find(DROPDOWN_CLASS + '__item.active').map(function () {\r\n            return $(this).data('filter');\r\n        }).get();\r\n\r\n        // Получаем все элементы\r\n        const $items = $list.find('.reviews__item');\r\n        $items.hide().removeClass('left right');\r\n\r\n        if (activeFilters.length > 0) {\r\n            const filteredItems = [];\r\n\r\n            $items.each(function () {\r\n                const $item = $(this);\r\n                const itemFilters = $item.data('filter').split(' ');\r\n\r\n                if (activeFilters.some(filter => itemFilters.includes(filter))) {\r\n                    filteredItems.push($item);\r\n                }\r\n            });\r\n\r\n            let index = 0;\r\n            filteredItems.forEach((item) => {\r\n                item.show().addClass(index % 2 === 0 ? 'left' : 'right');\r\n                index++;\r\n            });\r\n        } else {\r\n            $items.show();\r\n        }\r\n\r\n        const $visible = $list.find('.reviews__item:visible');\r\n        $visible.removeClass('margin-top-reset');\r\n        $visible.each(function (index) {\r\n            if (index <= 0) {\r\n                $(this).addClass('margin-top-reset');\r\n            }\r\n        });\r\n    });\r\n\r\n\r\n    // Универсальный переключатель с поддержкой любых количеств видов сеток\r\n    function viewGridSwitcher(btnSelector) {\r\n        const $btnSelector = $(btnSelector);\r\n        $btnSelector.on('click', function (e) {\r\n            e.preventDefault();\r\n            const view = $(this).data('view');\r\n            $btnSelector.removeClass('active');\r\n            $(this).addClass('active');\r\n            const $wrapper = $('.view__wrapper');\r\n            $wrapper.removeClass(function (index, className) {\r\n                return (className.match(/view__wrapper--\\S+/g) || []).join(' ');\r\n            });\r\n            if (view && view !== 'default') {\r\n                $wrapper.addClass(`view__wrapper--${view}`);\r\n            }\r\n        });\r\n    }\r\n\r\n    $(document).on('click touch', '.mini-card__option--link', function (e) {\r\n        e.preventDefault();\r\n        const optionValue = $(this).data('mini-card-option'); // ID товара или опции\r\n        if (!optionValue) return;\r\n        const $card = $(this).closest('.mini-card');\r\n        const $images = $card.find('.mini-card-img');\r\n        $card.find('.mini-card__option--link').removeClass('active');\r\n        $(this).addClass('active');\r\n        $images.removeClass('active').hide();\r\n        $card.find(`.mini-card-img.img-${optionValue}`).addClass('active').fadeIn();\r\n    });\r\n\r\n    $(document).on('click touch', '.product-card__option--link', function (e) {\r\n        e.preventDefault();\r\n        const optionValue = $(this).data('product-card-option'); // ID товара или опции\r\n        if (!optionValue) return;\r\n        const newTitle = $(this).data('product-card-title');\r\n        if (!newTitle) return;\r\n        const $optionContainer = $(this).closest('.product-card__option');\r\n        $optionContainer.find('.product-card__option--title').text(newTitle);\r\n\r\n        $optionContainer.find('.product-card__option--link').removeClass('active');\r\n        $(this).addClass('active');\r\n\r\n        // тут на Ajax получаем нужные данные из Woo\r\n        console.log(optionValue);\r\n\r\n    });\r\n\r\n    function waitAnimation() {\r\n        let scrollTop = $(window).scrollTop();\r\n        // start animations when it is in viewport but pause when out of it\r\n        // .out-of-viewport doing nothing if animation item can be runned only once\r\n        $('.js-wait-animation').each(function(){\r\n            if ( $(this).isInViewport() ) {\r\n                $(this).addClass('animate')\r\n                    .removeClass('out-of-viewport');\r\n            } else {\r\n                $(this).addClass('out-of-viewport');\r\n            }\r\n        });\r\n    }\r\n\r\n    $(window).on('load', function () {\r\n        initDropdownToggle([\r\n            '.dropdown-language',\r\n            '.dropdown-filter',\r\n            '.dropdown-category',\r\n            '.dropdown-sort',\r\n        ]);\r\n        viewGridSwitcher('.catalog-view a');\r\n    });\r\n\r\n    // Купить продукт\r\n    function addToCart(btnSelector) {\r\n        const $btnSelector = $(btnSelector);\r\n        $btnSelector.on('click touch', function () {\r\n            const $button = $(this);\r\n            const upSell  = $button.data('up-sell');  // post_ID\r\n            const product = $button.data('product'); // post_ID\r\n\r\n            const $productImage = $(`.popup-gallery[data-gallery=\"product-${product}\"] .popup-gallery__media .swiper-wrapper .swiper-slide img`).first();\r\n\r\n            if ($productImage.length === 0) {\r\n                console.log(`Изображение для продукта ${product} не найдено.`);\r\n            }\r\n\r\n            const $cartHeader = $('.header__cart');\r\n            const $cartIcon = $cartHeader.find('.ico-cart');\r\n            const $cartCount = $cartHeader.find('.header__cart--count');\r\n            const $cartCountText = $cartCount.find('.count');\r\n\r\n            let currentCount = parseInt($cartCountText.text());\r\n            let newCount = currentCount + 1;\r\n\r\n            if (!upSell) {\r\n                // Используем естественные размеры изображения\r\n                const imageWidth = $productImage.prop('naturalWidth');\r\n                const imageHeight = $productImage.prop('naturalHeight');\r\n\r\n                const $flyImage = $productImage.clone().addClass('fly-image').appendTo('body');\r\n\r\n                const buttonOffset = $button.offset();\r\n                const buttonCenterX = buttonOffset.left + $button.outerWidth() / 2;\r\n                const buttonCenterY = buttonOffset.top + $button.outerHeight() / 2 - ($button.outerHeight() * 3);\r\n\r\n                const cartOffset = $cartIcon.offset();\r\n                const cartCenterX = cartOffset.left + $cartIcon.width() / 2;\r\n                const cartCenterY = cartOffset.top + $cartIcon.height() / 2;\r\n\r\n                $flyImage.css({\r\n                    display: 'block',\r\n                    top: buttonCenterY - imageHeight / 2,\r\n                    left: buttonCenterX - imageWidth / 2,\r\n                    width: imageWidth,\r\n                    height: imageHeight,\r\n                    position: 'absolute',\r\n                    zIndex: 1000,\r\n                    pointerEvents: 'none'\r\n                });\r\n\r\n                const scale = $cartIcon.width() / imageWidth;\r\n\r\n                $flyImage.css({\r\n                    transition: 'transform 1000ms ease-in-out, opacity 1000ms ease-in-out',\r\n                    transformOrigin: 'center center',\r\n                    transform: `translate(${cartCenterX - buttonCenterX}px, ${cartCenterY - buttonCenterY}px) scale(${scale})`,\r\n                    opacity: 0.3\r\n                });\r\n\r\n                // Получаем данные для указанного ID продукта из Woo\r\n                const data = {\r\n                    1: {\r\n                        id: product,\r\n                        img: 'assets/img/catalog/grace-pro-black-2x.png',\r\n                        title: 'Кiгтеточка-лежанка Grace Pro Max',\r\n                        price: '₴ 1590',\r\n                        tag_text: 'Для притулку',\r\n                        tag_class: 'gift',\r\n                    },\r\n                    2: {\r\n                        id: product,\r\n                        img: 'assets/img/catalog/3in1-2x.png',\r\n                        title: 'Cloud',\r\n                        price: '₴ 2590',\r\n                        tag_text: 'Новинка',\r\n                        tag_class: 'new',\r\n                    },\r\n                    3: {\r\n                        id: product,\r\n                        img: 'assets/img/catalog/mouse-mr-pickles.png',\r\n                        title: 'Мишка Мiстер Піклз',\r\n                        price: '₴ 1590',\r\n                        tag_text: 'Новинка',\r\n                        tag_class: 'new',\r\n                    },\r\n                    4: {\r\n                        id: product,\r\n                        img: 'assets/img/catalog/pot-with-micro-greens.png',\r\n                        title: 'Горщик з мікрозеленню',\r\n                        price: '₴ 1590',\r\n                        tag_text: 'Для притулку',\r\n                        tag_class: 'gift',\r\n                    },\r\n                    5: {\r\n                        id: product,\r\n                        img: 'assets/img/catalog/t-shirt-cat-parents.png',\r\n                        title: 'Футболка котобатьків',\r\n                        price: '₴ 1590',\r\n                        tag_text: 'Для притулку',\r\n                        tag_class: 'gift',\r\n                    }\r\n                };\r\n\r\n                if (!data[product]) {\r\n                    console.log(`Товар с ID ${product} не найден.`);\r\n                    return;\r\n                }\r\n                const item = data[product];\r\n\r\n                const productHtml = `\r\n                    <div class=\"popup-cart__product\">\r\n                        <div class=\"popup-cart__item \">\r\n                            <div class=\"popup-cart__item--photo\">\r\n                                <a href=\"/catalog.html\" class=\"tag tag--${item.tag_class}\">${item.tag_text}</a>\r\n                                <img src=\"${item.img}\" alt=\"${item.title}\">\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"popup-cart__item\">\r\n                            <div class=\"popup-cart__title\">\r\n                                <h4 class=\"body-s-reg\">${item.title}</h4>\r\n                            </div>\r\n                            <div class=\"popup-cart__details\">\r\n                                <div class=\"popup-cart__calc\">\r\n                                    <button class=\"minus\"></button>\r\n                                    <input type=\"text\" id=\"quantity_${item.id}\" name=\"quantity[]\" name=\"cart[хешWoo][qty]\" class=\"quantity body-s-sb\" value=\"1\" />\r\n                                    <button class=\"plus\"></button>\r\n                                </div>\r\n                                <div class=\"popup-cart__price\">\r\n                                    <p class=\"body-s-sb\">${item.price}</p>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                `;\r\n\r\n                const $product = $('.popup-cart__products form');\r\n\r\n                $product.prepend(productHtml);\r\n\r\n                if (App.isMobileDevice()) {\r\n                    responsiveCart($product, 2);\r\n                } else {\r\n                    responsiveCart($product);\r\n                }\r\n\r\n                const $productFirst = $product.find('.popup-cart__product').first();\r\n                $productFirst.find('.popup-cart__calc .quantity').val(1);\r\n                initQuantityInput($productFirst);\r\n\r\n                if (newCount <= 99) $cartCountText.text(newCount);\r\n\r\n                setTimeout(() => {\r\n                    $flyImage.remove();\r\n                    $cartCount.show();\r\n\r\n                    // тут записываем в куки, что корзина не пуста для дальнейшей реализации на PHP\r\n                }, 1000);\r\n\r\n            } else {\r\n                if (newCount <= 99) $cartCountText.text(newCount);\r\n                addToCartUpSell(upSell);\r\n            }\r\n        });\r\n    }\r\n\r\n    if (!App.isMobileDevice()) {\r\n        addToCart('.add_to_cart');\r\n    }\r\n\r\n    function addToCartUpSell(post_id) {\r\n        const $product = $('.popup-cart__products form');\r\n\r\n        const $bannerCart = $('.banner-cart');\r\n        $bannerCart.find('.banner-cart__up-sell').last().show();\r\n        $bannerCart.find(`#up-sell-${post_id}.banner-cart__up-sell`).hide();\r\n\r\n        // Получаем данные для указанного ID продукта из Woo\r\n        const data = {\r\n            1: {\r\n                id: 1,\r\n                img: 'assets/img/content/popup-cart-banner-2x.jpg',\r\n                title: 'Мышка-игрушка Mr. Pickles',\r\n                discount: '-30%',\r\n                price: '₴ 90',\r\n                price_discount: '₴ 125',\r\n            },\r\n            2: {\r\n                id: 2,\r\n                img: 'assets/img/content/main-card-about-2x.jpg',\r\n                title: 'Домик для кота Mr. Whiskers',\r\n                discount: '-20%',\r\n                price: '₴ 150',\r\n                price_discount: '₴ 200',\r\n            }\r\n        };\r\n\r\n        if (!data[post_id]) {\r\n            console.log(`Товар с ID ${post_id} не найден.`);\r\n            return;\r\n        }\r\n\r\n        const item = data[post_id];\r\n\r\n        // Шаблон товара со скидкой\r\n        const upSellHtml = `\r\n            <div class=\"popup-cart__product popup-cart__up-sell\">\r\n                <div class=\"popup-cart__item\">\r\n                    <div class=\"popup-cart__item--photo\">\r\n                        <img src=\"${item.img}\" alt=\"${item.title}\">\r\n                    </div>\r\n                </div>\r\n                <div class=\"popup-cart__item\">\r\n                    <div class=\"popup-cart__title\">\r\n                        <h4 class=\"body-s-reg\">${item.title}</h4>\r\n                    </div>\r\n                    <div class=\"popup-cart__details\">\r\n                        <div class=\"popup-cart__calc\">\r\n                            <span class=\"tag tag--discount\">${item.discount}</span>\r\n                        </div>\r\n                        <div class=\"popup-cart__price\">\r\n                            <s class=\"banner-cart__discount\">${item.price_discount}</s>\r\n                            <p class=\"body-s-sb\">${item.price}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n\r\n        const $productFind = $product.find('.popup-cart__product');\r\n\r\n        if ($productFind.length === 0) {\r\n            $product.prepend(upSellHtml);\r\n        } else {\r\n            const $productLast = $productFind.last();\r\n            $productLast.after(upSellHtml);\r\n        }\r\n\r\n        responsiveCart($product);\r\n    }\r\n\r\n    function initQuantityInput($container) {\r\n        $container.find('.popup-cart__calc').each(function() {\r\n            const $calc = $(this);\r\n\r\n            $calc.on('click touch', '.minus', function() {\r\n                const $input = $(this).siblings('.quantity');\r\n                let currentValue = parseInt($input.val(), 10);\r\n\r\n                if (currentValue > 1) {\r\n                    $input.val(currentValue - 1);\r\n                }\r\n            });\r\n\r\n            $calc.on('click touch', '.plus', function() {\r\n                const $input = $(this).siblings('.quantity');\r\n                let currentValue = parseInt($input.val(), 10);\r\n                $input.val(currentValue + 1);\r\n            });\r\n\r\n            $calc.on('input', '.quantity', function() {\r\n                let currentValue = $(this).val();\r\n                if (!/^\\d+$/.test(currentValue) || parseInt(currentValue, 10) < 1) {\r\n                    $(this).val(1);\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    function responsiveCart($product, lengths = 3) {\r\n        if ($product.find('.popup-cart__product').length > lengths) {\r\n            $('.popup-cart').css('margin-bottom', '155px');\r\n            $('.banner-cart').css('margin', '20px 0');\r\n            $product.find('.popup-cart__totals.responsive').addClass('popup-cart__responsive');\r\n            $product.find('.banner-cart__up-sell.responsive').addClass('banner-cart__responsive');\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Pause all other videos\r\n     *\r\n     * @param videoContainer\r\n     */\r\n    function pauseOtherVideos(videoContainer) {\r\n        const $videoContainer = $(videoContainer).find('video');\r\n        $videoContainer.each(function () {\r\n            this.pause();\r\n        });\r\n    }\r\n\r\n    function playVideo(videoContainer) {\r\n        const $videoContainer = $(videoContainer);\r\n        const $video = $videoContainer.find('video');\r\n        const $button = $videoContainer.find('.video-block__button--mp4');\r\n        const $useIco = $button.find('.ico-video-button > use');\r\n\r\n        $button.on('click', function () {\r\n\r\n            $('.video-block__source video').each(function () {\r\n                if (this !== $video[0]) {\r\n                    this.pause();\r\n                    $(this).closest('.video-block__source')\r\n                        .find('.ico-video-button > use')\r\n                        .attr('href', 'assets/img/sprite.svg#ico-play');\r\n                }\r\n            });\r\n\r\n            if ($video[0].paused) {\r\n                $video[0].play();\r\n                if ( $video.hasClass('cover') ) {\r\n                    $video.css('object-fit', 'cover');\r\n                }\r\n                $useIco.attr('href', 'assets/img/sprite.svg#ico-pause');\r\n            } else {\r\n                $video[0].pause();\r\n                $useIco.attr('href', 'assets/img/sprite.svg#ico-play');\r\n            }\r\n        });\r\n    }\r\n\r\n    function playVideoThank(videoContainer, button, text = null) {\r\n        const $videoContainer = $(videoContainer);\r\n        const $video = $videoContainer.find('video');\r\n        const $button = $videoContainer.find(button);\r\n        const $text = $videoContainer.find(text);\r\n\r\n        $video.on('pause', function () {\r\n            $button.show();\r\n            $button.css('opacity', '1');\r\n        });\r\n\r\n        $button.on('click', function (e) {\r\n            if ($video[0].paused) {\r\n                $video[0].play();\r\n                $button.css('opacity', '.5');\r\n                $text.hide();\r\n\r\n            } else {\r\n                $video[0].pause();\r\n                $button.css('opacity', '1');\r\n                $text.show();\r\n            }\r\n        });\r\n\r\n        $video.on('click', function () {\r\n            if (this.played) {\r\n                this.pause();\r\n                $button.css('opacity', '1');\r\n                $text.show();\r\n            }\r\n        });\r\n\r\n        $(document).on('keyup', function (e) {\r\n            if (e.key === 'Escape' || e.keyCode === 27) {\r\n                if ($video[0].played) {\r\n                    $video[0].pause();\r\n                    $button.show();\r\n                    $text.show();\r\n                    $button.css('opacity', '1');\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function initializeAccordion(button, content, item) {\r\n        $(button).on('click', function(e) {\r\n            e.preventDefault();\r\n\r\n            const $accordionItem = $(this).closest(item);\r\n            const $visible = $accordionItem.find(content);\r\n\r\n            if (!$accordionItem.hasClass('active')) {\r\n                $accordionItem.siblings().removeClass('active').find(content).slideUp();\r\n                $accordionItem.addClass('active');\r\n                $visible.stop(true, true).slideDown();\r\n            } else {\r\n                $accordionItem.removeClass('active');\r\n                $visible.stop(true, true).slideUp();\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Адаптивное меню с прокруткой\r\n     */\r\n    function modelsMenu($selector) {\r\n        const $items = $selector.find('a');\r\n\r\n        function centerActiveItem($item) {\r\n            const menuWidth = $selector.outerWidth();\r\n            const menuScrollLeft = $selector.scrollLeft();\r\n            const itemOffsetLeft = $item.offset().left;\r\n            const menuOffsetLeft = $selector.offset().left;\r\n            const itemLeft = itemOffsetLeft - menuOffsetLeft;\r\n            const itemWidth = $item.outerWidth();\r\n            const scrollTo = menuScrollLeft + itemLeft - (menuWidth / 2) + (itemWidth / 2);\r\n            $selector.animate({ scrollLeft: scrollTo }, 300);\r\n        }\r\n\r\n        $items.on('click touch', function () {\r\n            const $clickedItem = $(this);\r\n            $items.removeClass('active');\r\n            $clickedItem.addClass('active');\r\n            centerActiveItem($clickedItem);\r\n        });\r\n\r\n        // Установить начальный активный элемент, если он есть, в центр\r\n        const $initialActive = $items;\r\n        if ($initialActive.length) {\r\n            centerActiveItem($initialActive);\r\n        }\r\n    }\r\n\r\n    function addClassOnScroll(selector, threshold, className) {\r\n        const $targetBlock = $(selector);\r\n\r\n        function handleScroll() {\r\n            if ($(window).scrollTop() >= threshold) {\r\n                if (!$targetBlock.hasClass(className)) {\r\n                    $targetBlock.addClass(className); // Добавляем класс\r\n                }\r\n            } else {\r\n                $targetBlock.removeClass(className); // Убираем класс\r\n            }\r\n        }\r\n\r\n        $(window).on('scroll', handleScroll);\r\n    }\r\n\r\n    /**\r\n     * Preloads all specified media elements (images or videos) within a hidden container.\r\n     * Ensures that when the container is displayed, the media is already loaded,\r\n     * improving user experience by eliminating loading delays.\r\n     *\r\n     * @param {string} containerSelector - A jQuery selector string specifying the hidden container\r\n     *                                     where the media elements are located.\r\n     * @param {string} mediaType - The type of media to preload.\r\n     *                             Possible values: 'img' for images, 'video' for videos.\r\n     *\r\n     * @example:\r\n     * $(document).ready(function () {\r\n     *     preloadHiddenMedia('.container', 'img');   // Preloads images\r\n     *     preloadHiddenMedia('.container', 'video'); // Preloads videos\r\n     * });\r\n     */\r\n    function preloadHiddenMedia(containerSelector, mediaType) {\r\n        if (mediaType !== 'img' && mediaType !== 'video') {\r\n            console.log('Invalid mediaType. Use \"img\" or \"video\".');\r\n            return;\r\n        }\r\n\r\n        $(containerSelector).find(mediaType).each(function () {\r\n            if (mediaType === 'img') {\r\n                const img = new Image();\r\n                img.src = $(this).attr('src');  // Preload image by setting src\r\n            } else if (mediaType === 'video') {\r\n                this.load();  // Preload video by invoking the load() method\r\n            }\r\n        });\r\n    }\r\n\r\n    function chooseProductScroll() {\r\n        App.$body.on('click touch', '.choose-product', () => {\r\n            if (App.$modelsMenu.length > 0) {\r\n                if (App.isMobileDevice()) {\r\n                    App.scrollTopBody(App.$productsMobile);\r\n                } else {\r\n                    App.scrollTopBody(App.$modelsMenu);\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    function toggleDropdownMenu(open) {\r\n        $(open).on('click', function () {\r\n            const $this = $(this);\r\n            const $item = $this.next('.menu-dropdown__item');\r\n            const $svg = $this.find('svg');\r\n            $item.slideToggle(300);\r\n            $svg.toggleClass('rotated');\r\n        });\r\n    }\r\n\r\n    $(window).on('load scroll', waitAnimation);\r\n\r\n    $(function() {\r\n\r\n        if (App.isMobileDevice()) {\r\n            toggleDropdownMenu('.menu-dropdown > .menu-dropdown__open');\r\n            addClassOnScroll('.product-card__form .product-card__buttons--clone', 200, 'fixed');\r\n\r\n            // Манипуляция с адаптивными кнопками\r\n            $('.product-card__form .product-card__buttons').each(function() {\r\n                const content = $(this).html();\r\n                $(this).remove();\r\n                $('.product-card__form .product-card__buttons--clone').html(content);\r\n            });\r\n\r\n            addToCart('.add_to_cart');\r\n\r\n            productsSlider('.products-mobile__slider.swiper-container');\r\n            productsSlider('.in-box .swiper-container');\r\n        }\r\n\r\n        $('.video-block__source').each(function () {\r\n            playVideo(this);\r\n        });\r\n\r\n        modelsMenu(App.$modelsMenu);\r\n        modelsMenu($('.blog-page__categories'));\r\n        playVideoThank('.thank-page__video', '.thank-page__button', '.thank-page__play--text');\r\n        initializeAccordion('.accordion-open', '.accordion__content', '.accordion__item');\r\n\r\n        addClassOnScroll('.section--reviews > .section__wrapper', 120, 'fixed');\r\n\r\n        // WP загружать только на нужных страницах\r\n        preloadHiddenMedia('.dialogs', 'img');\r\n\r\n        chooseProductScroll();\r\n\r\n        if ( App.$modelsMenu.length > 0 ) {\r\n            const $activeItem = App.$modelsMenu.find('a' + '.active');\r\n            if($activeItem.attr('href') === App.winLocHash || '#choose-product' === App.winLocHash) {\r\n                if (App.isMobileDevice()) {\r\n                    App.scrollTopBody(App.$productsMobile);\r\n                } else {\r\n                    App.scrollTopBody(App.$modelsMenu);\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n})(jQuery);"],"names":["$","window","App","isScrollTopBody","winLocHash","location","hash","$body","$htmlBody","$modelsMenu","$productsMobile","scrollTopBody","$element","indent","duration","length","animate","scrollTop","offset","top","initFileUpload","triggerSelector","inputSelector","textSelector","maxLength","on","trigger","let","fileName","this","files","name","extension","start","end","extIndex","lastIndexOf","slice","visibleLength","Math","ceil","floor","text","lazyLoadImages","each","src","srcset","$img","isInViewportImg","data","attr","hide","fadeIn","isMobileDevice","url","test","navigator","userAgent","fn","elementTop","elementBottom","outerHeight","viewportTop","viewportBottom","height","percentOfViewport","viewportHeight","ELtop_to_VPtop","ELbottom_to_VPtop","ELtop_to_VPbottom","ELbottom_to_VPbottom","isInViewport","p","toggleClass","slideToggle","navigationWrapper","css","removeAttr","padding-bottom","mask","previewProductCard","Swiper","direction","slidesPerView","spaceBetween","productsSlider","swiperContainer","document","querySelectorAll","forEach","container","autoHeight","dataset","centeredSlides","slideToClickedSlide","pagination","el","nextElementSibling","clickable","thumbs","swiper","navigation","nextEl","prevEl","breakpoints","320","slidesOffsetBefore","slidesOffsetAfter","480","640","autoplay","delay","$productSlider","PRODUCT_CLASS_SLIDER","threshold","speed","initialSlide","parseInt","loop","observer","observeParents","observeSlideChildren","hashNavigation","replaceState","watchState","init","slideChange","$item","find","removeClass","eq","realIndex","addClass","event","preventDefault","category","$dialogs","$categoryDialogs","$flexPopup","popupCategory","localStorage","setItem","overflow-y","show","opacity","product","previewPopUpGallery","pauseOtherVideos","console","log","$popupToOpen","popupId","bodyScroll","removeClassPopup","index","className","match","join","$popupActive","right","getItem","bottom","e","key","keyCode","DROPDOWN_CLASS","addToCart","btnSelector","$button","upSell","$productImage","first","$cartHeader","$cartIcon","$cartCount","$cartCountText","newCount","post_id","$product","$bannerCart","last","1","id","img","title","discount","price","price_discount","2","upSellHtml","item","$productFind","prepend","after","responsiveCart","imageWidth","prop","imageHeight","$flyImage","clone","appendTo","buttonOffset","buttonCenterX","left","outerWidth","buttonCenterY","cartOffset","cartCenterX","width","cartCenterY","scale","display","position","zIndex","pointerEvents","transition","transformOrigin","transform","tag_text","tag_class","3","4","5","productHtml","$productFirst","val","$calc","$input","siblings","currentValue","setTimeout","remove","lengths","videoContainer","pause","modelsMenu","$selector","$items","centerActiveItem","menuWidth","menuScrollLeft","scrollLeft","itemLeft","itemWidth","$clickedItem","$initialActive","addClassOnScroll","selector","$targetBlock","hasClass","stopPropagation","$filter","closest","$list","activeFilters","map","get","filteredItems","itemFilters","split","some","filter","includes","push","$visible","$card","$images","optionValue","newTitle","$optionContainer","selectors","btnSelectors","next","target","viewGridSwitcher","$btnSelector","view","$wrapper","content","mediaType","$this","$svg","html","playVideo","$video","$videoContainer","$useIco","paused","play","playVideoThank","button","$text","played","$accordionItem","stop","slideUp","slideDown","containerSelector","Image","load","jQuery"],"mappings":"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"}