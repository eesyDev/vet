{"version":3,"file":"animation.js","sources":["animation.js"],"sourcesContent":["$(document).ready(function() {\ngsap.registerPlugin(ScrollTrigger);\n\n// Анимация opacity\ngsap.utils.toArray('.head-animated').forEach(head => {\n  gsap.from(head, {\n    opacity: 0,\n    y: 50,\n    duration: 1,\n    scrollTrigger: {\n      trigger: head,\n      start: \"top 80%\",\n      end: \"bottom 20%\",\n      toggleActions: \"play none none reverse\"\n    }\n  });\n});\n\n// Анимация заголовков по скролу\ngsap.utils.toArray('.head-animated-scroll').forEach(head => {\n    gsap.from(head, {\n      opacity: 0,\n      y: 50,\n      scrollTrigger: {\n        trigger: head,\n        start: \"top 80%\",\n        end: \"top 20%\",\n        scrub: 0.5,\n      }\n    });\n  });\n\n// Анимация блоков\ngsap.utils.toArray('.block-animated-scale').forEach(block => {\n    gsap.from(block, {\n      scrollTrigger: {\n        trigger: block,\n        start: \"top 80%\", \n        end: \"top 20%\",   \n        scrub: 0.5 \n      },\n      y: 100,\n      scale: 0.8,\n      opacity: 0,\n    });\n  });\n\n// Анимация блоков слева\ngsap.utils.toArray('.from-left').forEach(block => {\n    gsap.from(block, {\n      scrollTrigger: {\n        trigger: block,\n        start: \"top 80%\",\n        end: \"top 20%\",\n        scrub: 0.5\n      },\n      x: -100, // начальная позиция слева\n      opacity: 0\n    });\n  });\n  \n// Анимация блоков справа\ngsap.utils.toArray('.from-right').forEach(block => {\ngsap.from(block, {\n    scrollTrigger: {\n    trigger: block,\n    start: \"top 80%\",\n    end: \"top 20%\",\n    scrub: 0.5\n    },\n    x: 100, // начальная позиция справа\n    opacity: 0\n});\n});\n\n\n    //Анимация текста\n    let text = document.querySelector('.cloud__description .h1h2');\n    if (text) {\n        const chars = text.textContent.split('');\n        text.textContent = '';\n\n        const totalScrollDistance = 60;\n        // const sectionHeight = totalScrollDistance / chars.length;\n        const sectionHeight = 100 / chars.length;\n        const textEndPoint = Math.min(sectionHeight * chars.length, 100);\n\n        chars.forEach((char, index) => {\n            let span = document.createElement('span');\n            span.textContent = char;\n            span.className = 'char';\n            text.appendChild(span);\n            \n            gsap.to(span, {\n                scrollTrigger: {\n                    trigger: \".cloud__description\",\n                    start: `${sectionHeight * index}% center`,\n                    end: `${sectionHeight * (index + 1)}% center`,\n                    scrub: 0.5,\n                    toggleActions: \"play reverse play reverse\"\n                },\n                color: \"#000000\",\n                ease: \"none\"\n            });\n        });\n\n        //Анимация cloud_message\n        let firstMessages = document.querySelectorAll('.cloud__message-first');\n        let lastFirstMessageEndPoint = 0;\n\n        if (firstMessages.length > 0) {\n            firstMessages.forEach((message, index) => {\n                gsap.set(message, {\n                    opacity: 0,\n                    y: 10\n                });\n\n                \n\n                // const startPoint = Math.min(15 + (index * 15), textEndPoint - 20);\n                // const endPoint = Math.min(35 + (index * 15), textEndPoint - 10);\n\n                const startPoint = 20 + (index * 13); // Каждое следующее сообщение начинается через 13%\n                const endPoint = startPoint + 10;\n                lastFirstMessageEndPoint = textEndPoint + 10; \n                gsap.to(message, {\n                    scrollTrigger: {\n                        trigger: \".cloud__description\",\n                        start: `${startPoint}% center`,\n                        end: `${endPoint}% center`,\n                        scrub: 1,\n                        toggleActions: \"play none none reverse\"\n                    },\n                    opacity: 1,\n                    y: 0,\n                    duration: 1,\n                    ease: \"power2.out\"\n                });\n\n                // Fade out animation\n                gsap.to(message, {\n                    scrollTrigger: {\n                        trigger: \".cloud__description\",\n                        start: `${textEndPoint}% center`,\n                        end: `${lastFirstMessageEndPoint}% center`,\n                        scrub: 1,\n                        toggleActions: \"play none none reverse\"\n                    },\n                    opacity: 0,\n                    y: -10,\n                    duration: 1,\n                    ease: \"power2.out\"\n                });\n            });\n        }\n\n        // Second set of messages\n        let newMessages = document.querySelectorAll('.cloud__message-new');\n        if (newMessages.length > 0) {\n            newMessages.forEach((message, index) => {\n                gsap.set(message, {\n                    opacity: 0,\n                    y: 10\n                });\n\n                // Start new messages after the last first message is faded out\n                const startPoint = lastFirstMessageEndPoint + (index * 15);\n                \n                gsap.to(message, {\n                    scrollTrigger: {\n                        trigger: \".cloud__description\",\n                        start: `${startPoint}% center`,\n                        end: `${startPoint + 15}% center`,\n                        scrub: 1,\n                        toggleActions: \"play none none reverse\"\n                    },\n                    opacity: 1,\n                    y: 0,\n                    duration: 1,\n                    ease: \"power2.out\"\n                });\n            });\n        }\n\n        const titleText = document.querySelector('.cloud__title h2');\n\n        if (titleText) {\n            gsap.to(titleText, {\n                scrollTrigger: {\n                    trigger: \".cloud__description\",\n                    start: `${textEndPoint}% center`,\n                    end: `${textEndPoint + 10}% center`,\n                    scrub: 1,\n                    toggleActions: \"play none none reverse\",\n                    onEnter: () => {\n                        // Анимация смены текста на \"Цінуємо у кандидатах:\"\n                        gsap.to(titleText, {\n                            opacity: 0,\n                            duration: 0.3,\n                            onComplete: () => {\n                                titleText.textContent = \"Цінуємо у кандидатах:\";\n                                gsap.to(titleText, {\n                                    opacity: 1,\n                                    duration: 0.3\n                                });\n                            }\n                        });\n                    },\n                    onLeaveBack: () => {\n                        // Анимация возврата текста на \"Ми:\"\n                        gsap.to(titleText, {\n                            opacity: 0,\n                            duration: 0.3,\n                            onComplete: () => {\n                                titleText.textContent = \"Ми:\";\n                                gsap.to(titleText, {\n                                    opacity: 1,\n                                    duration: 0.3\n                                });\n                            }\n                        });\n                    }\n                }\n            });\n        }\n    }\n\n    function formatNumber(number) {\n        return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \" \");\n    }\n    \n    const numberElements = document.querySelectorAll('.facts__item .h1h2 span');\n\n    if(numberElements) {\n        numberElements.forEach(element => {\n            const endValue = parseInt(element.textContent.replace(/\\s/g, ''));\n            element.textContent = '0';\n        \n            const duration = Math.min(2 + Math.log10(endValue) * 0.3, 4);\n        \n            gsap.to({\n                value: 0\n            }, {\n                value: endValue,\n                duration: duration,\n                ease: \"power1.out\",\n                scrollTrigger: {\n                    trigger: element,\n                    start: \"top 80%\",\n                    toggleActions: \"play none none none\"\n                },\n                onUpdate: function(anim) {\n                    const value = Math.round(this.targets()[0].value);\n                    element.textContent = formatNumber(value);\n                }\n            });\n        });\n    }\n})"],"names":["$","document","ready","gsap","registerPlugin","ScrollTrigger","utils","toArray","forEach","head","from","opacity","y","duration","scrollTrigger","trigger","start","end","toggleActions","scrub","block","scale","x","let","text","querySelector","chars","textContent","split","sectionHeight","length","textEndPoint","Math","min","char","index","span","createElement","className","appendChild","to","color","ease","firstMessages","querySelectorAll","lastFirstMessageEndPoint","message","set","startPoint","endPoint","newMessages","titleText","onEnter","onComplete","onLeaveBack","numberElements","element","endValue","parseInt","replace","log10","value","onUpdate","anim","round","this","targets","toString"],"mappings":"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"}