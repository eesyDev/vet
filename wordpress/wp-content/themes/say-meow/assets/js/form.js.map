{"version":3,"file":"form.js","sources":["form.js"],"sourcesContent":["(function ($) {\n\n    $(\"form\").on('submit', function () {\n\n        let form = $(this),\n            emailApprove = 0;\n\n        // Удаляем предыдущие ошибки\n        form.find('.error').remove();\n        form.find('.required').removeClass('required');\n\n        let actionValue = form.find('input[name=\"action\"]').val();\n\n        // Проверка полей\n        form.find('input[data-required], textarea[data-required], select[data-required]').each(function () {\n            let errorText = $(this).attr('data-error') || 'This field is required';\n\n            if ($(this).is(':checkbox')) {\n                // Проверка чек-боксов\n                if (!$(this).is(':checked')) {\n                    $(this).closest('.inp-wrp').append(`<div class=\"error\">${errorText}</div>`);\n                    $(this).addClass('required');\n                }\n            } else {\n                // Проверка текстовых полей и textarea\n                if (!$(this).val().trim()) {\n                    $(this).closest('.inp-wrp').append(`<div class=\"error\">${errorText}</div>`);\n                    $(this).addClass('required');\n                }\n            }\n\n        });\n\n        // Проверка email (если присутствует)\n        form.find('input.inp-email').each(function () {\n            let emailInput = $(this),\n                pattern = /^([a-z0-9_\\.-])+@[a-z0-9-]+\\.([a-z]{2,4}\\.)?[a-z]{2,4}$/i;\n            if (emailInput.val().trim() && !pattern.test(emailInput.val())) {\n                emailInput.closest('.inp-wrp').append(`<div class=\"error\">Invalid email address</div>`);\n                emailInput.addClass('required');\n                emailApprove = 0;\n            } else {\n                emailApprove = 1;\n            }\n        });\n\n        // Если есть ошибки, отменяем отправку\n        if (form.find('.required').length || emailApprove === 0) {\n\n            // Не скролить, если popup form окна\n            const validActions = ['call', 'consult', 'work_offer', 'order_products_one_click'];\n            if (!validActions.includes(actionValue)) {\n                const $firstError = form.find('.required').first();\n                if ($firstError.length) {\n                    App.scrollTopBody($firstError, 96, 600);\n                }\n            }\n            return false;\n        }\n\n        // Ваш AJAX-запрос\n        $.ajax({\n            type: \"POST\",\n            url: \"/mailer/mail.php\",\n            data: form.serialize(),\n            cache: false,\n            success: function () {\n                $('#thanks-popup').show();\n                form[0].reset(); // Сбрасываем форму\n            },\n            error: function () {\n                alert('Error occurred while submitting the form.');\n            }\n        });\n\n        return false; // Предотвращаем стандартную отправку формы\n    });\n\n    // Удаление ошибок при фокусе/изменении\n    $('input, textarea, select').on('click focus change', function () {\n        $(this).removeClass('required');\n        $(this).closest('.inp-wrp').find('.error').remove();\n    });\n\n    // Удаление ошибки для чекбокса при изменении\n    $('input[type=\"checkbox\"][data-required]').on('change', function () {\n        if ($(this).is(':checked')) {\n            $(this).removeClass('required');\n            $(this).closest('label').find('.error').remove();\n        }\n    });\n\n    // Не передзвонювати мені для підтвердження замовлення\n    $('#dont-call-back').on('change', function () {\n        const $dontCallBackBlock = $(this).closest('.order-form').find('.order-form__dont-call-back');\n        if ($(this).is(':checked')) {\n            $dontCallBackBlock.stop(true, true).slideDown(300);\n        } else {\n            $dontCallBackBlock.stop(true, true).slideUp(900);\n        }\n    });\n\n    App.initFileUpload('#work_offer-drop', '#work_offer-file', '#work_offer-drop span', 40);\n\n})(jQuery);"],"names":["$","on","let","form","this","emailApprove","find","remove","removeClass","actionValue","val","each","errorText","attr","is","closest","append","addClass","trim","emailInput","test","length","includes","$firstError","first","App","scrollTopBody","ajax","type","url","data","serialize","cache","success","show","reset","error","alert","$dontCallBackBlock","stop","slideDown","slideUp","initFileUpload","jQuery"],"mappings":"CAAWA,IAEPA,EAAE,MAAM,EAAEC,GAAG,SAAU,WAEnBC,IAAIC,EAAOH,EAAEI,IAAI,EACbC,EAAe,EAGnBF,EAAKG,KAAK,QAAQ,EAAEC,OAAO,EAC3BJ,EAAKG,KAAK,WAAW,EAAEE,YAAY,UAAU,EAE7CN,IAAIO,EAAcN,EAAKG,KAAK,sBAAsB,EAAEI,IAAI,EAgExD,OA7DAP,EAAKG,KAAK,sEAAsE,EAAEK,KAAK,WACnFT,IAAIU,EAAYZ,EAAEI,IAAI,EAAES,KAAK,YAAY,GAAK,yBAE1Cb,EAAEI,IAAI,EAAEU,GAAG,WAAW,EAEjBd,EAAEI,IAAI,EAAEU,GAAG,UAAU,IACtBd,EAAEI,IAAI,EAAEW,QAAQ,UAAU,EAAEC,6BAA6BJ,SAAiB,EAC1EZ,EAAEI,IAAI,EAAEa,SAAS,UAAU,GAI1BjB,EAAEI,IAAI,EAAEM,IAAI,EAAEQ,KAAK,IACpBlB,EAAEI,IAAI,EAAEW,QAAQ,UAAU,EAAEC,6BAA6BJ,SAAiB,EAC1EZ,EAAEI,IAAI,EAAEa,SAAS,UAAU,EAIvC,CAAC,EAGDd,EAAKG,KAAK,iBAAiB,EAAEK,KAAK,WAC9BT,IAAIiB,EAAanB,EAAEI,IAAI,EAKnBC,EAHAc,EAAWT,IAAI,EAAEQ,KAAK,GAAK,CADjB,2DAC0BE,KAAKD,EAAWT,IAAI,CAAC,GACzDS,EAAWJ,QAAQ,UAAU,EAAEC,OAAO,gDAAgD,EACtFG,EAAWF,SAAS,UAAU,EACf,GAEA,CAEvB,CAAC,EAGGd,EAAKG,KAAK,WAAW,EAAEe,QAA2B,IAAjBhB,EAGZ,CAAC,OAAQ,UAAW,aAAc,4BACrCiB,SAASb,CAAW,IAC5Bc,EAAcpB,EAAKG,KAAK,WAAW,EAAEkB,MAAM,GACjCH,QACZI,IAAIC,cAAcH,EAAa,GAAI,GAAG,EAOlDvB,EAAE2B,KAAK,CACHC,KAAM,OACNC,IAAK,mBACLC,KAAM3B,EAAK4B,UAAU,EACrBC,MAAO,CAAA,EACPC,QAAS,WACLjC,EAAE,eAAe,EAAEkC,KAAK,EACxB/B,EAAK,GAAGgC,MAAM,CAClB,EACAC,MAAO,WACHC,MAAM,2CAA2C,CACrD,CACJ,CAAC,EAEM,CAAA,CACX,CAAC,EAGDrC,EAAE,yBAAyB,EAAEC,GAAG,qBAAsB,WAClDD,EAAEI,IAAI,EAAEI,YAAY,UAAU,EAC9BR,EAAEI,IAAI,EAAEW,QAAQ,UAAU,EAAET,KAAK,QAAQ,EAAEC,OAAO,CACtD,CAAC,EAGDP,EAAE,uCAAuC,EAAEC,GAAG,SAAU,WAChDD,EAAEI,IAAI,EAAEU,GAAG,UAAU,IACrBd,EAAEI,IAAI,EAAEI,YAAY,UAAU,EAC9BR,EAAEI,IAAI,EAAEW,QAAQ,OAAO,EAAET,KAAK,QAAQ,EAAEC,OAAO,EAEvD,CAAC,EAGDP,EAAE,iBAAiB,EAAEC,GAAG,SAAU,WAC9B,IAAMqC,EAAqBtC,EAAEI,IAAI,EAAEW,QAAQ,aAAa,EAAET,KAAK,6BAA6B,EACxFN,EAAEI,IAAI,EAAEU,GAAG,UAAU,EACrBwB,EAAmBC,KAAK,CAAA,EAAM,CAAA,CAAI,EAAEC,UAAU,GAAG,EAEjDF,EAAmBC,KAAK,CAAA,EAAM,CAAA,CAAI,EAAEE,QAAQ,GAAG,CAEvD,CAAC,EAEDhB,IAAIiB,eAAe,mBAAoB,mBAAoB,wBAAyB,EAAE,CAEzF,GAAEC,MAAM"}